<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ÊâãÊú∫‰∏ªÂ±èÂπï</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
                'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',
                sans-serif;
            background: linear-gradient(135deg, #1a1a1a, #000);
            color: #fff;
            height: 100vh;
            overflow: hidden;
        }

        .phone {
            height: 100vh;
            display: flex;
            flex-direction: column;
            position: relative;
            overflow: hidden;
        }

        /* Áä∂ÊÄÅÊ†èÊ†∑Âºè */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 15px;
            height: 44px;
            background-color: rgba(0, 0, 0, 0);
            color: white;
            font-size: 16px;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .status-left, .status-center, .status-right {
            display: flex;
            align-items: center;
        }

        .status-left {
            flex: 1;
        }

        .status-center {
            flex: 2;
            justify-content: center;
        }

        .status-right {
            flex: 1;
            justify-content: flex-end;
        }

        .status-icon {
            width: 18px;
            height: 18px;
            margin: 0 5px;
        }

        /* ÂêçÁâáÂ∞èÁªÑ‰ª∂Ê†∑Âºè */
        .profile-widget {
            position: absolute;
            bottom: 140px;
            left: 25px;
            width: 160px;
            background: transparent;
            border-radius: 20px;
            padding: 15px;
            text-align: center;
            z-index: 998;
        }

        .profile-avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: #333;
            margin: 0 auto 15px;
            cursor: pointer;
            overflow: hidden;
            border: 2px solid white;
        }

        .profile-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

        .profile-avatar:hover {
            opacity: 0.8;
        }

        .profile-nickname {
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            padding: 5px;
            border-radius: 5px;
            margin-bottom: 10px;
        }

        .profile-nickname:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .profile-signature {
            font-size: 12px;
            color: #aaa;
            cursor: pointer;
            min-height: 20px;
            padding: 5px;
            border-radius: 10px;
        }

        .profile-signature:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        /* Â§©Ê∞î‰ø°ÊÅØÁªÑ‰ª∂Ê†∑Âºè */
        .weather-widget {
            position: absolute;
            top: 60px;
            left: 25px;
            width: calc(50% - 30px);
            background: rgba(255, 255, 255, 0.01);
            border-radius: 20px;
            padding: 15px;
            z-index: 996;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .weather-location {
            font-size: 16px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #fff;
        }

        .weather-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 10px;
        }

        /* Êô¥Â§©ÂõæÊ†áÂä®Áîª */
        .sunny-icon {
            animation: sunAnimation 3s ease-in-out infinite;
        }

        @keyframes sunAnimation {
            0%, 100% { transform: translateY(0) rotate(0deg); }
            50% { transform: translateY(-5px) rotate(5deg); }
        }

        /* Èõ®Â§©ÂõæÊ†áÂä®Áîª */
        .rainy-icon {
            animation: rainAnimation 2s linear infinite;
        }

        @keyframes rainAnimation {
            0% { transform: translateY(-10px); }
            100% { transform: translateY(10px); }
        }

        /* Èò¥Â§©ÂõæÊ†áÂä®Áîª */
        .cloudy-icon {
            animation: cloudAnimation 4s ease-in-out infinite;
        }

        @keyframes cloudAnimation {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(5px); }
        }

        /* Èõ™Â§©ÂõæÊ†áÂä®Áîª */
        .snowy-icon {
            animation: snowAnimation 4s linear infinite;
        }

        @keyframes snowAnimation {
            0% { transform: translateY(-5px) rotate(0deg); }
            100% { transform: translateY(5px) rotate(360deg); }
        }

        /* Â§ö‰∫ëËΩ¨Èò¥ÂõæÊ†áÂä®Áîª */
        .partly-cloudy-icon {
            animation: partlyCloudyAnimation 3s ease-in-out infinite;
        }

        @keyframes partlyCloudyAnimation {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        /* Èõ®Â§πÈõ™ÂõæÊ†áÂä®Áîª */
        .sleet-icon {
            animation: sleetAnimation 2s ease-in-out infinite;
        }

        @keyframes sleetAnimation {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }

        .weather-temp {
            font-size: 24px;
            font-weight: bold;
            text-align: center;
            margin-bottom: 5px;
            color: #fff;
        }

        .weather-day {
            font-size: 14px;
            text-align: center;
            margin-bottom: 5px;
            color: #aaa;
        }

        .weather-date {
            font-size: 14px;
            text-align: center;
            color: #aaa;
        }

        .weather-description {
            font-size: 14px;
            text-align: center;
            margin-bottom: 5px;
            color: #aaa;
        }

        /* ÁÖßÁâáÂ±ïÁ§∫ÁªÑ‰ª∂Ê†∑Âºè */
        .photo-display-widget {
            position: absolute;
            top: 46px;
            right: 16px;
            width: calc(50% - 10px);
            background: transparent; /* ÁßªÈô§ËÉåÊôØ */
            border-radius: 20px;
            padding: 15px;
            z-index: 996;
            cursor: pointer;
            transition: transform 0.2s ease;
            height: 276px; /* Ë∞ÉÊï¥È´òÂ∫¶‰ª•ÂåπÈÖçÂ§©Ê∞îÁªÑ‰ª∂(ÂåÖÊã¨padding) */
        }

        .photo-display-widget:hover {
            transform: scale(1.02);
        }

        .photo-display-container {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            border-radius: 10px;
        }

        .photo-display-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
        }

        .photo-display-placeholder img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
            border-radius: 10px;
        }

        /* ÊóãËΩ¨Âä®ÁîªÁ±ª */
        .rotating {
            animation: rotate 20s linear infinite;
            animation-play-state: paused;
            width: 100%;
            height: 100%;
            border-radius: 50%;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .rotating.playing {
            animation-play-state: running;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* ‰∏ìËæëÂ∞ÅÈù¢Âç†‰ΩçÁ¨¶ */
        .rotating .placeholder {
            font-size: 24px;
            color: rgba(255, 255, 255, 0.5);
        }

        /* ‰∏ìËæëÂ∞ÅÈù¢ÂõæÁâá */
        .rotating img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

        .photo-icon {
            font-size: 30px;
            margin-bottom: 10px;
        }

        .photo-text {
            font-size: 14px;
            color: #aaa;
        }

        /* ÊªëÂä®È°µÈù¢ÂÆπÂô® */
        .pages-container {
            width: 100%;
            height: 100%;
            position: relative;
            overflow: hidden; /* ÈöêËóèË∂ÖÂá∫ÈÉ®ÂàÜ */
        }

        .page {
            width: 100%;
            height: 100%;
            position: absolute; /* ‰ΩøÁî®ÁªùÂØπÂÆö‰Ωç */
            top: 0;
            left: 0;
            padding-top: 44px; /* ‰∏∫Áä∂ÊÄÅÊ†èÁïôÂá∫Á©∫Èó¥ */
            padding-bottom: 0; /* ÁßªÈô§Â∫ïÈÉ®paddingÔºåËÆ©home-screenËá™Â∑±Â§ÑÁêÜ */
            transition: transform 0.3s ease; /* Ê∑ªÂä†ËøáÊ∏°ÊïàÊûú */
        }
        
        /* Á¨¨‰∫åÈ°µÂàùÂßã‰ΩçÁΩÆÂú®Â±èÂπïÂè≥‰æß */
        .page:nth-child(2) {
            transform: translateX(100%);
        }

        /* ‰∏ªÂ±èÂπïÂÜÖÂÆπÂå∫Âüü */
        .home-screen {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            grid-template-rows: repeat(5, 1fr);
            gap: 25px;
            padding: 56px 25px 120px 25px; /* Ë∞ÉÊï¥È°∂ÈÉ®paddingÔºå‰∏∫Áä∂ÊÄÅÊ†èÁïôÂá∫Á©∫Èó¥ */
            align-content: start;
            height: 100%; /* Êîπ‰∏∫100%È´òÂ∫¶ */
            position: relative;
            z-index: 10;
        }

        .app-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: transform 0.2s;
            position: relative;
        }

        .app-icon.dragging {
            opacity: 0.5;
            transform: scale(1.1);
            z-index: 1000;
        }

        .app-icon .icon-bg {
            width: 65px;
            height: 65px;
            border-radius: 18px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 8px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .app-icon .icon-bg svg {
            width: 35px;
            height: 35px;
        }

        .app-icon span {
            font-size: 13px;
            text-align: center;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
        }

        .app-icon:hover {
            transform: scale(1.1);
        }

        /* DockÊ†èÊ†∑Âºè */
        .dock {
            height: 100px;
            display: flex;
            justify-content: center;
            align-items: center;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            padding: 15px;
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 30px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.15);
            z-index: 999;
        }

        .dock .app-icon {
            margin: 0 10px;
        }

        .dock .app-icon .icon-bg {
            width: 70px;
            height: 70px;
            border-radius: 20px;
        }

        .dock .app-icon .icon-bg svg {
            width: 40px;
            height: 40px;
        }

        /* ÈöêËóèÊñá‰ª∂ËæìÂÖ•Ê°Ü */
        .hidden-file-input {
            display: none;
        }

        /* Ëá™ÂÆö‰πâÂºπÁ™óÊ†∑Âºè */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: rgba(30, 30, 30, 0.95);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 25px;
            width: 90%;
            max-width: 350px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transform: translateY(20px);
            transition: transform 0.3s ease;
        }

        .modal.active .modal-content {
            transform: translateY(0);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 18px;
            font-weight: bold;
        }

        .close-btn {
            background: transparent;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-size: 14px;
            color: #aaa;
        }

        .form-input {
            width: 100%;
            padding: 12px 15px;
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: white;
            font-size: 16px;
            box-sizing: border-box;
        }

        .form-input:focus {
            outline: none;
            border-color: rgba(0, 122, 255, 0.5);
            background: rgba(255, 255, 255, 0.15);
        }

        .upload-area {
            border: 2px dashed rgba(255, 255, 255, 0.2);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.3s;
        }

        .upload-area:hover {
            border-color: rgba(0, 122, 255, 0.5);
            background: rgba(0, 122, 255, 0.05);
        }

        .upload-icon {
            font-size: 40px;
            margin-bottom: 10px;
        }

        .upload-text {
            font-size: 14px;
            color: #aaa;
        }

        .submit-btn {
            width: 100%;
            padding: 15px;
            border-radius: 12px;
            background: linear-gradient(45deg, #007AFF, #0A84FF);
            border: none;
            color: white;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(10, 132, 255, 0.4);
        }

        .submit-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        /* ÊãñÊãΩÂç†‰ΩçÁ¨¶ */
        .drag-placeholder {
            width: 65px;
            height: 65px;
            border: 2px dashed rgba(255, 255, 255, 0.5);
            border-radius: 18px;
            margin-bottom: 8px;
        }

        /* Â£ÅÁ∫∏Ê†∑Âºè */
        .wallpaper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            z-index: -1;
            opacity: 1;
        }
        
        /* ËßÜÈ¢ëÂ£ÅÁ∫∏Ê†∑Âºè */
        .wallpaper video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            position: absolute;
            top: 0;
            left: 0;
            z-index: -1;
        }

        /* Èü≥‰πêÊí≠ÊîæÂô®Â∞èÁªÑ‰ª∂ */
        .music-player {
            position: absolute;
            top: 320px;  /* ËøòÂéüÂéüÊù•ÁöÑ‰ΩçÁΩÆ */
            left: 25px;
            width: calc(100% - 50px);
            background: rgba(255, 255, 255, 0.01);
            border-radius: 20px;
            padding: 10px;
            z-index: 997;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
        }

        /* ËØ≠Èü≥ÁªÑ‰ª∂Ê†∑Âºè */
        .voice-component {
            position: absolute;
            top: 585px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 350px;
            height: 60px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border-radius: 30px;
            display: flex;
            align-items: center;
            padding: 0 15px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
            z-index: 100;
        }

        /* Êµ™Êº´ÂøÉË∑≥ÁªÑ‰ª∂Ê†∑Âºè */
        .romantic-heartbeat-widget {
            position: absolute;
            top: 60px;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 350px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 20px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            z-index: 20;
        }
        
        .heartbeat-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
        }
        
        .avatar {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 2;
            border: 2px solid rgba(255, 255, 255, 0.3);
            cursor: pointer;
        }
        
        .avatar-img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            overflow: hidden;
        }
        
        .avatar-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }
        
        .avatar-placeholder {
            font-size: 30px;
            line-height: 60px;
        }
        
        .heartbeat-area {
            flex: 1;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
        }
        
        .heart-icon {
            width: 50px;
            height: 50px;
            animation: heartbeat 1.2s ease-in-out infinite;
            position: relative;
            z-index: 3;
        }
        
        .heart-icon svg {
            width: 100%;
            height: 100%;
        }
        
        @keyframes heartbeat {
            0% { transform: scale(1); }
            5% { transform: scale(1.1); }
            10% { transform: scale(1); }
            15% { transform: scale(1.2); }
            50% { transform: scale(1); }
            100% { transform: scale(1); }
        }
        
        /* ÂàõÂª∫Áà±ÂøÉÂΩ¢Áä∂ÁöÑÂèëÂÖâÊïàÊûú */
        .heart-icon::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url("data:image/svg+xml,%3Csvg viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z' fill='red'/%3E%3C/svg%3E") center/contain no-repeat;
            z-index: -1;
            animation: pulse 1.2s ease-in-out infinite;
            filter: blur(15px);
            opacity: 0.7;
        }
        
        /* ÂàõÂª∫ÂøÉÁîµÂõæËÑâÂÜ≤ÊäòÁ∫øÊïàÊûú */
        .ecg-line {
            position: absolute;
            width: 100%;
            height: 60px;
            top: 50%;
            transform: translateY(-50%);
            overflow: hidden;
        }
        
        /* ‰ΩøÁî®SVGÂàõÂª∫ÂøÉÁîµÂõæÊäòÁ∫ø */
        .ecg-line::after {
            content: '';
            position: absolute;
            width: 200%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 60'%3E%3Cpath d='M0,30 L20,30 L30,10 L40,50 L50,30 L70,30 L80,15 L90,45 L100,30 L120,30 L130,20 L140,40 L150,30 L170,30 L180,25 L190,35 L200,30' stroke='red' stroke-width='2' fill='none' stroke-dasharray='1000' stroke-dashoffset='1000'%3E%3Canimate attributeName='stroke-dashoffset' from='1000' to='0' dur='2s' repeatCount='indefinite'/%3E%3C/path%3E%3C/svg%3E");
            background-repeat: repeat-x;
            animation: ecgMove 2s linear infinite;
            filter: drop-shadow(0 0 4px rgba(255, 0, 0, 0.7));
        }
        
        @keyframes ecgMove {
            0% { transform: translateX(0); }
            100% { transform: translateX(-100px); }
        }
        
        /* ÂøÉË∑≥Âä®ÁîªÂ¢ûÂº∫ */
        @keyframes pulse {
            0% { 
                transform: scale(1);
                opacity: 0.7;
            }
            50% { 
                transform: scale(1.8);
                opacity: 0.4;
            }
            100% { 
                transform: scale(1);
                opacity: 0.7;
            }
        }
        
        .star-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-left: 10px;
            cursor: pointer;
        }
        
        .voice-wave {
            flex: 1;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .wave-bar {
            width: 3px;
            height: 10px;
            background: rgba(255, 255, 255, 0.6);
            margin: 0 2px;
            border-radius: 2px;
            animation: waveAnimation 1s infinite ease-in-out;
        }
        
        .wave-bar:nth-child(2) {
            animation-delay: 0.1s;
            height: 15px;
        }
        
        .wave-bar:nth-child(3) {
            animation-delay: 0.2s;
            height: 20px;
        }
        
        .wave-bar:nth-child(4) {
            animation-delay: 0.3s;
            height: 25px;
        }
        
        .wave-bar:nth-child(5) {
            animation-delay: 0.4s;
            height: 20px;
        }
        
        .wave-bar:nth-child(6) {
            animation-delay: 0.5s;
            height: 15px;
        }
        
        .wave-bar:nth-child(7) {
            animation-delay: 0.6s;
            height: 10px;
        }
        
        @keyframes waveAnimation {
            0%, 100% {
                transform: scaleY(1);
            }
            50% {
                transform: scaleY(1.5);
            }
        }

        .album-cover {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            overflow: hidden;
            margin-right: 15px;
            flex-shrink: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(255, 255, 255, 0.1);
        }

        .album-cover .placeholder {
            font-size: 30px;
            color: rgba(255, 255, 255, 0.5);
        }

        .album-cover img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }

        /* Èü≥‰πê‰ø°ÊÅØ */
        .music-info {
            flex: 1;
            display: flex;
            flex-direction: column;
            min-width: 0;
            position: relative;
        }

        .voice-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            cursor: pointer;
            overflow: hidden;
        }
        
        .voice-avatar .avatar-img {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            overflow: hidden;
        }
        
        .voice-avatar .avatar-img img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            object-position: center;
        }
        
        .voice-avatar .avatar-placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
        }
        
        .song-info {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
            width: 100%;
        }

        .song-name {
            font-size: 14px;
            font-weight: bold;
            margin-right: 8px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            flex: 1;
            min-width: 0;
        }

        .favorite-btn {
            width: 24px;
            height: 24px;
            background: transparent;
            border: none;
            cursor: pointer;
            padding: 0;
            flex-shrink: 0;
            position: absolute;
            top: 0;
            right: 0;
            filter: drop-shadow(0 0 4px rgba(255, 59, 48, 0.3));
        }

        .favorite-btn.active {
            filter: drop-shadow(0 0 8px rgba(255, 59, 48, 0.8));
        }

        .favorite-btn svg {
            width: 100%;
            height: 100%;
            fill: #fff;
        }

        .favorite-btn.active svg {
            fill: #ff3b30;
        }

        .artist-name {
            font-size: 12px;
            color: #aaa;
            margin-bottom: 10px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* ÊéßÂà∂ÊåâÈíÆ */
        .control-buttons {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }

        .control-btn {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            border: none;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
        }

        .control-btn svg {
            width: 16px;
            height: 16px;
            fill: white;
        }

        .play-btn {
            width: 40px;
            height: 40px;
        }

        .play-btn svg {
            width: 20px;
            height: 20px;
        }
    </style>
</head>
<body>
    <!-- Â£ÅÁ∫∏ -->
    <div class="wallpaper" id="wallpaper"></div>
    
    <!-- ÈöêËóèÁöÑÈü≥È¢ëÊí≠ÊîæÂô® -->
    <audio id="audioPlayer" style="display: none;"></audio>
    
    <div class="phone">
        <!-- Áä∂ÊÄÅÊ†è -->
        <div class="status-bar">
            <div class="status-left">
                <span class="time" id="current-time">00:00</span>
            </div>
            <div class="status-center">
                <!-- ‰∏≠Èó¥ÁïôÁ©∫ -->
            </div>
            <div class="status-right">
                <!-- ‰ø°Âè∑ÂõæÊ†á -->
                <svg class="status-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M5 17L5 12" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <path d="M12 17L12 7" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <path d="M19 17L19 2" stroke="white" stroke-width="2" stroke-linecap="round"/>
                </svg>
                <!-- ÁîµÊ±†ÂõæÊ†á -->
                <svg class="status-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect x="2" y="7" width="16" height="10" rx="3" stroke="white" stroke-width="2"/>
                    <path d="M20 10V14" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    <rect x="4" y="9" width="12" height="6" rx="2" fill="white"/>
                </svg>
            </div>
        </div>

        <!-- ÊªëÂä®È°µÈù¢ÂÆπÂô® -->
        <div class="pages-container" id="pagesContainer">
            <!-- Á¨¨‰∏ÄÈ°µ -->
            <div class="page" id="page1">
                <!-- ÂêçÁâáÂ∞èÁªÑ‰ª∂ -->
                <div class="profile-widget">
                    <div class="profile-avatar" id="profileAvatar" onclick="changeAvatar()">
                        <span style="font-size: 30px; line-height: 60px;">üë§</span>
                    </div>
                    <div class="profile-nickname" id="profileNickname" onclick="changeNickname()">ÁÇπÂáªËÆæÁΩÆÊòµÁß∞</div>
                    <div class="profile-signature" id="profileSignature" onclick="changeSignature()">ÁÇπÂáªËÆæÁΩÆ‰∏™ÊÄßÁ≠æÂêç</div>
                </div>

                <!-- Â§©Ê∞î‰ø°ÊÅØÁªÑ‰ª∂ -->
                <div class="weather-widget" onclick="openWeatherModal()">
                    <div class="weather-location" id="weatherLocation">Âåó‰∫¨</div>
                    <div class="weather-icon">
                        <!-- Êô¥Â§©ÂõæÊ†á -->
                        <svg class="sunny-icon" id="sunnyIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                            <circle cx="12" cy="12" r="4" fill="#FFD700" stroke="#FFA500" stroke-width="1.5"/>
                            <path d="M12 3V1" stroke="#FFA500" stroke-width="2" stroke-linecap="round"/>
                            <path d="M12 23V21" stroke="#FFA500" stroke-width="2" stroke-linecap="round"/>
                            <path d="M3 12H1" stroke="#FFA500" stroke-width="2" stroke-linecap="round"/>
                            <path d="M23 12H21" stroke="#FFA500" stroke-width="2" stroke-linecap="round"/>
                            <path d="M5.64 5.64L4.22 4.22" stroke="#FFA500" stroke-width="2" stroke-linecap="round"/>
                            <path d="M19.78 19.78L18.36 18.36" stroke="#FFA500" stroke-width="2" stroke-linecap="round"/>
                            <path d="M5.64 18.36L4.22 19.78" stroke="#FFA500" stroke-width="2" stroke-linecap="round"/>
                            <path d="M19.78 4.22L18.36 5.64" stroke="#FFA500" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        
                        <!-- Èõ®Â§©ÂõæÊ†á -->
                        <svg class="rainy-icon" id="rainyIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                            <path d="M6 14C4.34315 14 3 15.3431 3 17C3 18.6569 4.34315 20 6 20H16C17.6569 20 19 18.6569 19 17C19 15.3431 17.6569 14 16 14H6Z" fill="#87CEEB"/>
                            <path d="M8 16C6.34315 16 5 17.3431 5 19C5 20.6569 6.34315 22 8 22H14C15.6569 22 17 20.6569 17 19C17 17.3431 15.6569 16 14 16H8Z" fill="#87CEEB"/>
                            <!-- Èõ®Êª¥1 -->
                            <path d="M9 18L9 20" stroke="#4682B4" stroke-width="1.5" stroke-linecap="round">
                                <animate attributeName="opacity" values="0;1;0" dur="1s" repeatCount="indefinite" begin="0s"/>
                                <animate attributeName="y" values="16;22" dur="1s" repeatCount="indefinite" begin="0s"/>
                            </path>
                            <!-- Èõ®Êª¥2 -->
                            <path d="M12 18L12 20" stroke="#4682B4" stroke-width="1.5" stroke-linecap="round">
                                <animate attributeName="opacity" values="0;1;0" dur="1s" repeatCount="indefinite" begin="0.3s"/>
                                <animate attributeName="y" values="16;22" dur="1s" repeatCount="indefinite" begin="0.3s"/>
                            </path>
                            <!-- Èõ®Êª¥3 -->
                            <path d="M15 18L15 20" stroke="#4682B4" stroke-width="1.5" stroke-linecap="round">
                                <animate attributeName="opacity" values="0;1;0" dur="1s" repeatCount="indefinite" begin="0.6s"/>
                                <animate attributeName="y" values="16;22" dur="1s" repeatCount="indefinite" begin="0.6s"/>
                            </path>
                        </svg>
                        
                        <!-- Èò¥Â§©ÂõæÊ†á -->
                        <svg class="cloudy-icon" id="cloudyIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                            <path d="M6 14C4.34315 14 3 15.3431 3 17C3 18.6569 4.34315 20 6 20H16C17.6569 20 19 18.6569 19 17C19 15.3431 17.6569 14 16 14H6Z" fill="#C0C0C0"/>
                            <path d="M8 16C6.34315 16 5 17.3431 5 19C5 20.6569 6.34315 22 8 22H14C15.6569 22 17 20.6569 17 19C17 17.3431 15.6569 16 14 16H8Z" fill="#C0C0C0"/>
                        </svg>
                        
                        <!-- Èõ™Â§©ÂõæÊ†á -->
                        <svg class="snowy-icon" id="snowyIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                            <path d="M6 14C4.34315 14 3 15.3431 3 17C3 18.6569 4.34315 20 6 20H16C17.6569 20 19 18.6569 19 17C19 15.3431 17.6569 14 16 14H6Z" fill="#87CEEB"/>
                            <path d="M8 16C6.34315 16 5 17.3431 5 19C5 20.6569 6.34315 22 8 22H14C15.6569 22 17 20.6569 17 19C17 17.3431 15.6569 16 14 16H8Z" fill="#87CEEB"/>
                            <!-- Èõ™Ëä±1 -->
                            <circle cx="9" cy="18" r="1.5" fill="white">
                                <animate attributeName="opacity" values="0;1;0" dur="2s" repeatCount="indefinite" begin="0s"/>
                            </circle>
                            <!-- Èõ™Ëä±2 -->
                            <circle cx="12" cy="19" r="1.5" fill="white">
                                <animate attributeName="opacity" values="0;1;0" dur="2s" repeatCount="indefinite" begin="0.5s"/>
                            </circle>
                            <!-- Èõ™Ëä±3 -->
                            <circle cx="15" cy="18" r="1.5" fill="white">
                                <animate attributeName="opacity" values="0;1;0" dur="2s" repeatCount="indefinite" begin="1s"/>
                            </circle>
                        </svg>
                        
                        <!-- Â§ö‰∫ëËΩ¨Èò¥ÂõæÊ†á -->
                        <svg class="partly-cloudy-icon" id="partlyCloudyIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                            <circle cx="10" cy="10" r="3" fill="#FFD700" stroke="#FFA500" stroke-width="1.5"/>
                            <path d="M10 7V5" stroke="#FFA500" stroke-width="2" stroke-linecap="round"/>
                            <path d="M6 14C4.34315 14 3 15.3431 3 17C3 18.6569 4.34315 20 6 20H16C17.6569 20 19 18.6569 19 17C19 15.3431 17.6569 14 16 14H6Z" fill="#C0C0C0"/>
                            <path d="M8 16C6.34315 16 5 17.3431 5 19C5 20.6569 6.34315 22 8 22H14C15.6569 22 17 20.6569 17 19C17 17.3431 15.6569 16 14 16H8Z" fill="#C0C0C0"/>
                        </svg>
                        
                        <!-- Èõ®Â§πÈõ™ÂõæÊ†á -->
                        <svg class="sleet-icon" id="sleetIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="display: none;">
                            <path d="M6 14C4.34315 14 3 15.3431 3 17C3 18.6569 4.34315 20 6 20H16C17.6569 20 19 18.6569 19 17C19 15.3431 17.6569 14 16 14H6Z" fill="#87CEEB"/>
                            <path d="M8 16C6.34315 16 5 17.3431 5 19C5 20.6569 6.34315 22 8 22H14C15.6569 22 17 20.6569 17 19C17 17.3431 15.6569 16 14 16H8Z" fill="#87CEEB"/>
                            <!-- Èõ®Êª¥ -->
                            <path d="M9 18L9 20" stroke="#4682B4" stroke-width="1.5" stroke-linecap="round">
                                <animate attributeName="opacity" values="0;1;0" dur="1s" repeatCount="indefinite" begin="0s"/>
                                <animate attributeName="y" values="16;22" dur="1s" repeatCount="indefinite" begin="0s"/>
                            </path>
                            <!-- Èõ™Ëä± -->
                            <circle cx="15" cy="18" r="1.5" fill="white">
                                <animate attributeName="opacity" values="0;1;0" dur="2s" repeatCount="indefinite" begin="0.5s"/>
                            </circle>
                        </svg>
                        
                        <!-- ÈªòËÆ§ÂõæÊ†á -->
                        <svg id="defaultWeatherIcon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z" stroke="white" stroke-width="2"/>
                            <path d="M19.4 15C19.2667 15.2667 18.8 16.2 17.8 17.2C16.8 18.2 15.8667 18.6667 15.6 18.8" stroke="white" stroke-width="2" stroke-linecap="round"/>
                            <path d="M12 22C14.5 20.5 16 18.5 16 16C16 13.5 14.5 11.5 12 10C9.5 11.5 8 13.5 8 16C8 18.5 9.5 20.5 12 22Z" stroke="white" stroke-width="2"/>
                            <path d="M4.6 9C4.73333 8.73333 5.2 7.8 6.2 6.8C7.2 5.8 8.13333 5.33333 8.4 5.2" stroke="white" stroke-width="2" stroke-linecap="round"/>
                            <path d="M19.4 9C19.2667 8.73333 18.8 7.8 17.8 6.8C16.8 5.8 15.8667 5.33333 15.6 5.2" stroke="white" stroke-width="2" stroke-linecap="round"/>
                            <path d="M4.6 15C4.73333 15.2667 5.2 16.2 6.2 17.2C7.2 18.2 8.13333 18.6667 8.4 18.8" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <div class="weather-temp" id="weatherTemp">25¬∞C</div>
                    <div class="weather-description" id="weatherDescription">Êô¥Â§©</div>
                    <div class="weather-day" id="weatherDay">ÊòüÊúü‰∏â</div>
                    <div class="weather-date" id="weatherDate">10Êúà1Êó•</div>
                </div>

                <!-- ÁÖßÁâáÂ±ïÁ§∫ÁªÑ‰ª∂ -->
                <div class="photo-display-widget" onclick="changePhotoDisplay()">
                    <div class="photo-display-container">
                        <div class="photo-display-placeholder" id="photoDisplay">
                            <span class="photo-icon">üì∑</span>
                            <span class="photo-text">ÁÇπÂáªÊ∑ªÂä†ÁÖßÁâá</span>
                        </div>
                    </div>
                </div>

                <!-- Èü≥‰πêÊí≠ÊîæÂô®Â∞èÁªÑ‰ª∂ -->
                <div class="music-player">
                    <div class="album-cover rotating" id="albumCover" onclick="changeAlbumCover()">
                        <div class="placeholder">‚ô™</div>
                    </div>
                    <div class="music-info">
                        <div class="song-info">
                            <div class="song-name" id="songName" onclick="openSongModal()">Êú™Áü•Ê≠åÊõ≤</div>
                        </div>
                        <button class="favorite-btn" id="favoriteBtn" onclick="toggleFavorite()">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z"/>
                            </svg>
                        </button>
                        <div class="artist-name" id="artistName">Êú™Áü•Ëâ∫ÊúØÂÆ∂</div>
                        <div class="control-buttons">
                            <button class="control-btn" onclick="previousSong()">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6 6H8V18H6V6ZM9.5 12L18 6V18L9.5 12Z"/>
                                </svg>
                            </button>
                            <button class="control-btn play-btn" onclick="togglePlay()" id="playBtn">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="playIcon">
                                    <path d="M8 5V19L19 12L8 5Z" id="playPath"/>
                                </svg>
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="pauseIcon" style="display: none;">
                                    <path d="M14 19V5H18V19H14ZM6 19V5H10V19H6Z"/>
                                </svg>
                            </button>
                            <button class="control-btn" onclick="nextSong()">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6 18L14.5 12L6 6V18ZM16 6V18H18V6H16Z"/>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- ‰∏ªÂ±èÂπïÂÜÖÂÆπ -->
                <div class="home-screen" id="homeScreen">
                    <!-- Â£ÅÁ∫∏Â∫îÁî®ÂõæÊ†á - Á¨¨ÂõõË°åÁ¨¨‰∏âÂàó -->
                    <div class="app-icon" onclick="window.location.href='bizhi.html'" data-app="Â£ÅÁ∫∏" style="grid-column: 3; grid-row: 4;">
                        <div class="icon-bg">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M4 16L9 11L13 15L20 8" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <rect x="3" y="3" width="18" height="18" rx="3" stroke="white" stroke-width="2"/>
                            </svg>
                        </div>
                        <span>Â£ÅÁ∫∏</span>
                    </div>
                    
                    <!-- ËÆæÁΩÆÂ∫îÁî®ÂõæÊ†á - Á¨¨ÂõõË°åÁ¨¨ÂõõÂàó -->
                    <div class="app-icon" onclick="window.location.href='shezhi.html'" data-app="ËÆæÁΩÆ" style="grid-column: 4; grid-row: 4;">
                        <div class="icon-bg">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <span>ËÆæÁΩÆ</span>
                    </div>
                    
                    <!-- ËÅäÂ§©Â∫îÁî®ÂõæÊ†á - Á¨¨‰∫îË°åÁ¨¨‰∏âÂàó -->
                    <div class="app-icon" onclick="window.location.href='chat.html'" data-app="ËÅäÂ§©" style="grid-column: 3; grid-row: 5;">
                        <div class="icon-bg">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M21 11.5C21.0034 12.8199 20.6951 14.1219 20.1 15.3C19.3948 16.7262 18.3522 17.9555 17.05 18.9C15.7478 19.8445 14.2199 20.4861 12.58 20.77C11.9413 20.8791 11.2916 20.9135 10.64 20.88L7 22L8.12 18.36C7.38368 17.9462 6.71624 17.4224 6.14 16.8C4.72104 15.2441 3.92829 13.2159 4 11.1C4.00344 9.78012 4.31172 8.47814 4.90685 7.30001C5.61203 5.87386 6.65462 4.64455 7.95683 3.69999C9.25903 2.75544 10.7869 2.11382 12.4269 1.82999C14.0669 1.54616 15.7757 1.62764 17.42 2.06999C19.0643 2.51234 20.5975 3.30299 21.9 4.37999C23.2025 5.45699 24.15 7.02999 24.15 8.76999C24.1491 9.55042 24.0492 10.3261 23.85 11.07L24 11L21 11.5Z" stroke="white" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
                                <path d="M8 12H8.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                                <path d="M12 12H12.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                                <path d="M16 12H16.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                            </svg>
                        </div>
                        <span>ËÅäÂ§©</span>
                    </div>
                    
                    <!-- Èü≥‰πêÂ∫îÁî®ÂõæÊ†á - Á¨¨‰∫îË°åÁ¨¨ÂõõÂàó -->
                    <div class="app-icon" onclick="window.location.href='yinyue.html'" data-app="Èü≥‰πê" style="grid-column: 4; grid-row: 5;">
                        <div class="icon-bg">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 3V12L19 5V19L12 12V21" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <span>Èü≥‰πê</span>
                    </div>
                    </div>
                </div>

                <!-- Á¨¨‰∫åÈ°µ -->
                <div class="page" id="page2">
                    <!-- Êµ™Êº´ÂøÉË∑≥ÁªÑ‰ª∂ -->
                    <div class="romantic-heartbeat-widget">
                        <div class="heartbeat-container">
                            <!-- Â§¥ÂÉè1 -->
                            <div class="avatar avatar-left" onclick="changeAvatar('left')">
                                <div class="avatar-img" id="avatarLeft">
                                    <div class="avatar-placeholder">üë§</div>
                                </div>
                            </div>
                            
                            <!-- ÂøÉË∑≥Âä®ÁîªÂå∫Âüü -->
                            <div class="heartbeat-area">
                                <div class="heart-icon">
                                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M12 21.35L10.55 20.03C5.4 15.36 2 12.28 2 8.5C2 5.42 4.42 3 7.5 3C9.24 3 10.91 3.81 12 5.09C13.09 3.81 14.76 3 16.5 3C19.58 3 22 5.42 22 8.5C22 12.28 18.6 15.36 13.45 20.04L12 21.35Z" stroke="red" stroke-width="2" fill="red"/>
                                    </svg>
                                </div>
                                <div class="ecg-line"></div>
                            </div>
                            
                            <!-- Â§¥ÂÉè2 -->
                            <div class="avatar avatar-right" onclick="changeAvatar('right')">
                                <div class="avatar-img" id="avatarRight">
                                    <div class="avatar-placeholder">üë§</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ËØ≠Èü≥ÁªÑ‰ª∂ÔºàÊñ∞Â¢ûÔºâ -->
                    <div class="voice-component" id="voiceComponent" onclick="playVoiceAudio()">
                        <!-- Â§¥ÂÉè -->
                        <div class="voice-avatar" onclick="changeVoiceAvatar(); event.stopPropagation();">
                            <div class="avatar-img" id="voiceAvatarContainer">
                                <img id="voiceAvatarImg" src="" alt="Â§¥ÂÉè" style="width: 100%; height: 100%; border-radius: 50%; object-fit: cover; display: none;">
                                <div class="avatar-placeholder" id="voiceAvatarPlaceholder" style="font-size: 20px; width: 100%; height: 100%; display: flex; align-items: center; justify-content: center;">üë§</div>
                            </div>
                        </div>
                        
                        <!-- ËØ≠Èü≥Ê≥¢Á∫πÊù° -->
                        <div class="voice-wave" id="voiceWave">
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                            <div class="wave-bar"></div>
                        </div>
                        
                        <!-- ÊòüÊòüÂõæÊ†á -->
                        <div class="star-icon" onclick="uploadVoiceAudio(); event.stopPropagation();">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="width: 20px; height: 20px;">
                                <path d="M12 2L15.09 8.26L22 9L17 14L18.18 21L12 17.77L5.82 21L7 14L2 9L8.91 8.26L12 2Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>

                    <!-- ‰∏ªÂ±èÂπïÂÜÖÂÆπ -->
                    <div class="home-screen">
                        <!-- Êó•ËÆ∞Â∫îÁî®ÂõæÊ†á - Á¨¨‰∏âË°åÁ¨¨‰∏ÄÂàó -->
                        <div class="app-icon" onclick="alert('Êó•ËÆ∞Â∫îÁî®ÂäüËÉΩÂºÄÂèë‰∏≠')" data-app="Êó•ËÆ∞" style="grid-row: 3; grid-column: 1;">
                            <div class="icon-bg">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 19.5V4.5C4 3.5 5 2.5 6 2.5H17C18 2.5 19 3.5 19 4.5V19.5L12 16.5L4 19.5Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M9 9H15" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M9 13H13" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <span>Êó•ËÆ∞</span>
                        </div>
                        
                        <!-- Ë¥≠Áâ©Â∫îÁî®ÂõæÊ†á - Á¨¨‰∏âË°åÁ¨¨‰∫åÂàó -->
                        <div class="app-icon" onclick="alert('Ë¥≠Áâ©Â∫îÁî®ÂäüËÉΩÂºÄÂèë‰∏≠')" data-app="Ë¥≠Áâ©" style="grid-row: 3; grid-column: 2;">
                            <div class="icon-bg">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M6 2L3 6V20C3 20.5304 3.21071 21.0391 3.58579 21.4142C3.96086 21.7893 4.46957 22 5 22H19C19.5304 22 20.0391 21.7893 20.4142 21.4142C20.7893 21.0391 21 20.5304 21 20V6L18 2H6Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M3 6H21" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M16 10C16 11.0609 15.5786 12.0783 14.8284 12.8284C14.0783 13.5786 13.0609 14 12 14C10.9391 14 9.92172 13.5786 9.17157 12.8284C8.42143 12.0783 8 11.0609 8 10" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <span>Ë¥≠Áâ©</span>
                        </div>
                        
                        <!-- ËÆ∫ÂùõÂ∫îÁî®ÂõæÊ†á - Á¨¨‰∏âË°åÁ¨¨‰∏âÂàó -->
                        <div class="app-icon" onclick="alert('ËÆ∫ÂùõÂ∫îÁî®ÂäüËÉΩÂºÄÂèë‰∏≠')" data-app="ËÆ∫Âùõ" style="grid-row: 3; grid-column: 3;">
                            <div class="icon-bg">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M21 15C21 15.5304 20.7893 16.0391 20.4142 16.4142C20.0391 16.7893 19.5304 17 19 17H7L3 21V5C3 4.46957 3.21071 3.96086 3.58579 3.58579C3.96086 3.21071 4.46957 3 5 3H19C19.5304 3 20.0391 3.21071 20.4142 3.58579C20.7893 3.96086 21 4.46957 21 5V15Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M16 10H16.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                                    <path d="M12 10H12.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                                    <path d="M8 10H8.01" stroke="white" stroke-width="3" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <span>ËÆ∫Âùõ</span>
                        </div>
                        
                        <!-- Â§áÂøòÂΩïÂ∫îÁî®ÂõæÊ†á - Á¨¨‰∏âË°åÁ¨¨ÂõõÂàó -->
                        <div class="app-icon" onclick="alert('Â§áÂøòÂΩïÂ∫îÁî®ÂäüËÉΩÂºÄÂèë‰∏≠')" data-app="Â§áÂøòÂΩï" style="grid-row: 3; grid-column: 4;">
                            <div class="icon-bg">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M4 6H20V18C20 19.1046 19.1046 20 18 20H6C4.89543 20 4 19.1046 4 18V6Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M4 10H20" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M9 14H10" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M9 17H12" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <span>Â§áÂøòÂΩï</span>
                        </div>
                        
                        <!-- Èí±ÂåÖÂ∫îÁî®ÂõæÊ†á - Á¨¨ÂõõË°åÁ¨¨‰∏ÄÂàó -->
                        <div class="app-icon" onclick="alert('Èí±ÂåÖÂ∫îÁî®ÂäüËÉΩÂºÄÂèë‰∏≠')" data-app="Èí±ÂåÖ" style="grid-row: 4; grid-column: 1;">
                            <div class="icon-bg">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M3 7H21C21.5523 7 22 7.44772 22 8V17C22 17.5523 21.5523 18 21 18H3C2.44772 18 2 17.5523 2 17V8C2 7.44772 2.44772 7 3 7Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M2 12H4" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M18 12C18 13.1046 17.1046 14 16 14C14.8954 14 14 13.1046 14 12C14 10.8954 14.8954 10 16 10C17.1046 10 18 10.8954 18 12Z" stroke="white" stroke-width="2"/>
                                </svg>
                            </div>
                            <span>Èí±ÂåÖ</span>
                        </div>
                        
                        <!-- ÁîµËØùÂ∫îÁî®ÂõæÊ†á - Á¨¨ÂõõË°åÁ¨¨‰∫åÂàó -->
                        <div class="app-icon" onclick="alert('ÁîµËØùÂ∫îÁî®ÂäüËÉΩÂºÄÂèë‰∏≠')" data-app="ÁîµËØù" style="grid-row: 4; grid-column: 2;">
                            <div class="icon-bg">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M3 6C3 5.44772 3.44772 5 4 5H20C20.5523 5 21 5.44772 21 6V18C21 18.5523 20.5523 19 20 19H4C3.44772 19 3 18.5523 3 18V6Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M8 7H16" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M8 11H16" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                    <path d="M8 15H13" stroke="white" stroke-width="2" stroke-linecap="round"/>
                                </svg>
                            </div>
                            <span>ÁîµËØù</span>
                        </div>
                        
                        <!-- Èô™‰º¥Â∫îÁî®ÂõæÊ†á - Á¨¨ÂõõË°åÁ¨¨‰∏âÂàó -->
                        <div class="app-icon" onclick="alert('Èô™‰º¥Â∫îÁî®ÂäüËÉΩÂºÄÂèë‰∏≠')" data-app="Èô™‰º¥" style="grid-row: 4; grid-column: 3;">
                            <div class="icon-bg">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 12C14.2091 12 16 10.2091 16 8C16 5.79086 14.2091 4 12 4C9.79086 4 8 5.79086 8 8C8 10.2091 9.79086 12 12 12Z" stroke="white" stroke-width="2"/>
                                    <path d="M6 20C6 17.7909 7.79086 16 10 16H14C16.2091 16 18 17.7909 18 20V20C18 21.1046 17.1046 22 16 22H8C6.89543 22 6 21.1046 6 20V20Z" stroke="white" stroke-width="2"/>
                                </svg>
                            </div>
                            <span>Èô™‰º¥</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- DockÊ†è -->
        <div class="dock">
            <div class="app-icon" data-app="ËßíËâ≤‰π¶" onclick="window.location.href='jueseshu.html'">
                <div class="icon-bg">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z" stroke="white" stroke-width="2"/>
                        <path d="M12 7V12L15 15" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        <path d="M8 16C8.5 14.5 10 13.5 12 13.5C14 13.5 15.5 14.5 16 16" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </div>
            </div>
            <div class="app-icon" data-app="‰∏ñÁïå‰π¶" onclick="window.location.href='shijieshu.html'">
                <div class="icon-bg">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="white" stroke-width="2"/>
                        <path d="M8 3H16" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        <path d="M8 21H16" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        <path d="M12 2V22" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        <path d="M3 12H21" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        <path d="M3 8L7 8" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        <path d="M3 16L7 16" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        <path d="M17 8L21 8" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        <path d="M17 16L21 16" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </div>
            </div>
            <div class="app-icon" data-app="ËØ¥Êòé‰π¶" onclick="window.location.href='shuomingshu.html'">
                <div class="icon-bg">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M4 2H20C21.1046 2 22 2.89543 22 4V20C22 21.1046 21.1046 22 20 22H4C2.89543 22 2 21.1046 2 20V4C2 2.89543 2.89543 2 4 2Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M9 7H15" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        <path d="M9 11H15" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        <path d="M9 15H13" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </div>
            </div>
            <div class="app-icon" data-app="ÂõæÊ†á" onclick="window.location.href='tubiao.html'">
                <div class="icon-bg">
                    <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="white" stroke-width="2"/>
                        <circle cx="12" cy="12" r="3" stroke="white" stroke-width="2"/>
                        <path d="M3 12H21" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        <path d="M12 3V21" stroke="white" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </div>
            </div>
        </div>

        <!-- ÈöêËóèÊñá‰ª∂ËæìÂÖ•Ê°Ü -->
        <input type="file" id="avatarUpload" class="hidden-file-input" accept="image/*">

        <!-- Ê≠åÊõ≤‰ø°ÊÅØÂºπÁ™ó -->
        <div class="modal" id="songModal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">ËÆæÁΩÆÊ≠åÊõ≤‰ø°ÊÅØ</div>
                    <button class="close-btn" onclick="closeSongModal()">&times;</button>
                </div>
                <div class="form-group">
                    <label class="form-label">‰∏ä‰º†MP3Êñá‰ª∂</label>
                    <div class="upload-area" onclick="document.getElementById('mp3Upload').click()">
                        <div class="upload-icon">üéµ</div>
                        <div class="upload-text">ÁÇπÂáªÈÄâÊã©MP3Êñá‰ª∂</div>
                    </div>
                    <input type="file" id="mp3Upload" class="hidden-file-input" accept="audio/mpeg" onchange="handleMp3Upload(event)">
                </div>
                <div class="form-group">
                    <label class="form-label">Ê≠åÊõ≤ÂêçÁß∞</label>
                    <input type="text" class="form-input" id="songNameInput" placeholder="ËØ∑ËæìÂÖ•Ê≠åÊõ≤ÂêçÁß∞">
                </div>
                <div class="form-group">
                    <label class="form-label">Ê≠åÊâã</label>
                    <input type="text" class="form-input" id="artistNameInput" placeholder="ËØ∑ËæìÂÖ•Ê≠åÊâãÂêçÁß∞">
                </div>
                <button class="submit-btn" id="saveSongBtn" onclick="saveSongInfo()" disabled>‰øùÂ≠ò</button>
            </div>
        </div>

        <!-- Â§©Ê∞îÈÄâÊã©ÂºπÁ™ó -->
        <div class="modal" id="weatherModal">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="modal-title">ÈÄâÊã©ÂüéÂ∏Ç</div>
                    <button class="close-btn" onclick="closeWeatherModal()">&times;</button>
                </div>
                <div class="form-group">
                    <label class="form-label">ÂüéÂ∏ÇÂêçÁß∞</label>
                    <input type="text" class="form-input" id="cityInput" placeholder="ËØ∑ËæìÂÖ•ÂüéÂ∏ÇÂêçÁß∞ÔºåÂ¶ÇÔºöÂåó‰∫¨„ÄÅ‰∏äÊµ∑„ÄÅÂπøÂ∑û">
                </div>
                <div class="form-group">
                    <label class="form-label">ÁÉ≠Èó®ÂüéÂ∏Ç</label>
                    <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 10px;">
                        <button class="submit-btn" style="flex: 1; min-width: 80px; padding: 8px;" onclick="selectCity('Âåó‰∫¨')">Âåó‰∫¨</button>
                        <button class="submit-btn" style="flex: 1; min-width: 80px; padding: 8px;" onclick="selectCity('‰∏äÊµ∑')">‰∏äÊµ∑</button>
                        <button class="submit-btn" style="flex: 1; min-width: 80px; padding: 8px;" onclick="selectCity('ÂπøÂ∑û')">ÂπøÂ∑û</button>
                        <button class="submit-btn" style="flex: 1; min-width: 80px; padding: 8px;" onclick="selectCity('Ê∑±Âú≥')">Ê∑±Âú≥</button>
                        <button class="submit-btn" style="flex: 1; min-width: 80px; padding: 8px;" onclick="selectCity('Êù≠Â∑û')">Êù≠Â∑û</button>
                        <button class="submit-btn" style="flex: 1; min-width: 80px; padding: 8px;" onclick="selectCity('ÊàêÈÉΩ')">ÊàêÈÉΩ</button>
                    </div>
                </div>
                <button class="submit-btn" onclick="updateWeatherByCity()">Á°ÆÂÆö</button>
            </div>
        </div>

        <script>
            // Êõ¥Êñ∞Êó∂Èó¥
            function updateTime() {
                const now = new Date();
                const timeString = now.toLocaleTimeString('zh-CN', { hour: '2-digit', minute: '2-digit' });
                document.getElementById('current-time').textContent = timeString;
            }

            // ÊØèÁßíÊõ¥Êñ∞‰∏ÄÊ¨°Êó∂Èó¥
            setInterval(updateTime, 1000);
            updateTime(); // ÂàùÂßãÂåñÊó∂Èó¥

            // È°µÈù¢Âä†ËΩΩÊó∂Ê£ÄÊü•ÊòØÂê¶Êúâ‰øùÂ≠òÁöÑÂ£ÅÁ∫∏
            window.onload = function() {
                updateTime();
                loadProfileData();
                loadWallpaper();
                initMusicPlayer();
                loadDisplayPhoto(); // Âä†ËΩΩÂ±ïÁ§∫ÁÖßÁâá
                loadWeatherData(); // Âä†ËΩΩÂ§©Ê∞îÊï∞ÊçÆ
                loadCustomIcons(); // Âä†ËΩΩËá™ÂÆö‰πâÂõæÊ†á
                loadVoiceAvatar(); // Âä†ËΩΩËØ≠Èü≥Â§¥ÂÉè
                loadRomanticAvatars(); // Âä†ËΩΩÊµ™Êº´Â§¥ÂÉè
                
                // ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩÂ§©Ê∞îÁä∂ÊÄÅÔºåÂ¶ÇÊûúÊ≤°ÊúâÂàôÈªòËÆ§‰∏∫Êô¥Â§©
                const savedWeatherState = localStorage.getItem('weatherState') || 'sunny';
                setWeatherState(savedWeatherState);
            };

            // ÁõëÂê¨Êù•Ëá™ÂõæÊ†áÁÆ°ÁêÜÈ°µÈù¢ÁöÑÊ∂àÊÅØ
            window.addEventListener('message', function(event) {
                if (event.data.type === 'updateIcon') {
                    updateAppIcon(event.data.iconId, event.data.iconData);
                } else if (event.data.type === 'restoreIcons') {
                    loadCustomIcons(); // ÈáçÊñ∞Âä†ËΩΩÊâÄÊúâÂõæÊ†á
                }
            });

            // Âä†ËΩΩËá™ÂÆö‰πâÂõæÊ†á
            function loadCustomIcons() {
                // ‰∏ªÂ±èÂπïÂ∫îÁî®ÂõæÊ†á
                const mainScreenApps = [
                    { id: 'bizhi', selector: '.app-icon[data-app="Â£ÅÁ∫∏"]' },
                    { id: 'shezhi', selector: '.app-icon[data-app="ËÆæÁΩÆ"]' },
                    { id: 'chat', selector: '.app-icon[data-app="ËÅäÂ§©"]' },
                    { id: 'yinyue', selector: '.app-icon[data-app="Èü≥‰πê"]' }
                ];
                
                mainScreenApps.forEach(app => {
                    const customIcon = localStorage.getItem(`customIcon_${app.id}`);
                    if (customIcon) {
                        const appIcon = document.querySelector(app.selector);
                        if (appIcon) {
                            const iconBg = appIcon.querySelector('.icon-bg');
                            if (iconBg) {
                                iconBg.innerHTML = `<img src="${customIcon}" alt="${app.id}" style="width:100%;height:100%;object-fit:cover;border-radius:18px;">`;
                            }
                        }
                    }
                });
                
                // DockÊ†èÂ∫îÁî®ÂõæÊ†á
                const dockApps = [
                    { id: 'jueseshu-dock', selector: '.dock .app-icon[data-app="ËßíËâ≤‰π¶"]' },
                    { id: 'shijieshu-dock', selector: '.dock .app-icon[data-app="‰∏ñÁïå‰π¶"]' },
                    { id: 'shuomingshu-dock', selector: '.dock .app-icon[data-app="ËØ¥Êòé‰π¶"]' },
                    { id: 'tubiao-dock', selector: '.dock .app-icon[data-app="ÂõæÊ†á"]' }
                ];
                
                dockApps.forEach(app => {
                    const customIcon = localStorage.getItem(`customIcon_${app.id}`);
                    if (customIcon) {
                        const appIcon = document.querySelector(app.selector);
                        if (appIcon) {
                            const iconBg = appIcon.querySelector('.icon-bg');
                            if (iconBg) {
                                iconBg.innerHTML = `<img src="${customIcon}" alt="${app.id}" style="width:100%;height:100%;object-fit:cover;border-radius:20px;">`;
                            }
                        }
                    }
                });
            }

            // Êõ¥Êñ∞Âçï‰∏™Â∫îÁî®ÂõæÊ†á
            function updateAppIcon(iconId, iconData) {
                // ‰∏ªÂ±èÂπïÂ∫îÁî®ÂõæÊ†á
                const mainScreenApps = [
                    { id: 'bizhi', selector: '.app-icon[data-app="Â£ÅÁ∫∏"]' },
                    { id: 'shezhi', selector: '.app-icon[data-app="ËÆæÁΩÆ"]' },
                    { id: 'chat', selector: '.app-icon[data-app="ËÅäÂ§©"]' },
                    { id: 'yinyue', selector: '.app-icon[data-app="Èü≥‰πê"]' }
                ];
                
                // DockÊ†èÂ∫îÁî®ÂõæÊ†á
                const dockApps = [
                    { id: 'jueseshu-dock', selector: '.dock .app-icon[data-app="ËßíËâ≤‰π¶"]' },
                    { id: 'shijieshu-dock', selector: '.dock .app-icon[data-app="‰∏ñÁïå‰π¶"]' },
                    { id: 'shuomingshu-dock', selector: '.dock .app-icon[data-app="ËØ¥Êòé‰π¶"]' },
                    { id: 'tubiao-dock', selector: '.dock .app-icon[data-app="ÂõæÊ†á"]' }
                ];
                
                // Êü•ÊâæÂåπÈÖçÁöÑÂ∫îÁî®
                const allApps = [...mainScreenApps, ...dockApps];
                const app = allApps.find(a => a.id === iconId);
                
                if (app) {
                    const appIcon = document.querySelector(app.selector);
                    if (appIcon) {
                        const iconBg = appIcon.querySelector('.icon-bg');
                        if (iconBg) {
                            // Ê†πÊçÆÂ∫îÁî®Á±ªÂûãËÆæÁΩÆ‰∏çÂêåÁöÑÂúÜËßí
                            const borderRadius = iconId.includes('-dock') ? '20px' : '18px';
                            iconBg.innerHTML = `<img src="${iconData}" alt="${iconId}" style="width:100%;height:100%;object-fit:cover;border-radius:${borderRadius};">`;
                        }
                    }
                }
            }

            // Âä†ËΩΩ‰∏™‰∫∫ËµÑÊñôÊï∞ÊçÆ
            function loadProfileData() {
                // Âä†ËΩΩÂ§¥ÂÉè
                const savedAvatar = localStorage.getItem('profileAvatar');
                if (savedAvatar) {
                    document.getElementById('profileAvatar').innerHTML = `<img src="${savedAvatar}" alt="Â§¥ÂÉè" style="width:100%;height:100%;object-fit:cover;object-position:center;">`;
                }

                // Âä†ËΩΩÊòµÁß∞
                const savedNickname = localStorage.getItem('profileNickname');
                if (savedNickname) {
                    document.getElementById('profileNickname').textContent = savedNickname;
                }

                // Âä†ËΩΩ‰∏™ÊÄßÁ≠æÂêç
                const savedSignature = localStorage.getItem('profileSignature');
                if (savedSignature) {
                    document.getElementById('profileSignature').textContent = savedSignature;
                }
            }

            // Âä†ËΩΩÂ£ÅÁ∫∏
            function loadWallpaper() {
                const savedWallpaper = localStorage.getItem('wallpaper');
                const wallpaperElement = document.getElementById('wallpaper');
                
                // Ê∏ÖÈô§Áé∞ÊúâÁöÑÂ£ÅÁ∫∏
                wallpaperElement.style.backgroundImage = '';
                wallpaperElement.innerHTML = '';
                
                if (savedWallpaper) {
                    try {
                        // Ëß£ÊûêÂ£ÅÁ∫∏Êï∞ÊçÆ
                        const wallpaperData = JSON.parse(savedWallpaper);
                        
                        if (wallpaperData && wallpaperData.src) {
                            if (wallpaperData.type === 'video' && wallpaperData.poster) {
                                // ËßÜÈ¢ëÂ£ÅÁ∫∏ - ÂàõÂª∫ËßÜÈ¢ëÂÖÉÁ¥†
                                wallpaperElement.innerHTML = `
                                    <video 
                                        src="${wallpaperData.src}" 
                                        poster="${wallpaperData.poster}" 
                                        autoplay 
                                        muted 
                                        playsinline
                                        loop 
                                        style="width:100%;height:100%;object-fit:cover;position:absolute;top:0;left:0;z-index:-1;">
                                    </video>
                                `;
                                
                                // Á°Æ‰øùËßÜÈ¢ëÂú®È°µÈù¢Âä†ËΩΩÂêéÊí≠Êîæ
                                setTimeout(() => {
                                    const video = wallpaperElement.querySelector('video');
                                    if (video) {
                                        // Á°Æ‰øùËßÜÈ¢ëÊòØÈùôÈü≥ÁöÑ
                                        video.muted = true;
                                        video.playsInline = true;
                                        
                                        // Ê£ÄÊü•ÊòØÂê¶ÊîØÊåÅËá™Âä®Êí≠Êîæ
                                        video.play().catch(e => {
                                            console.error('Ëá™Âä®Êí≠ÊîæÂ§±Ë¥•:', e);
                                        });
                                    }
                                }, 100);
                            } else if (wallpaperData.type === 'image') {
                                // ÂõæÁâáÂ£ÅÁ∫∏ - ËÆæÁΩÆËÉåÊôØÂõæÁâá
                                wallpaperElement.style.backgroundImage = `url(${wallpaperData.src})`;
                            }
                        }
                    } catch (e) {
                        console.error('Ëß£ÊûêÂ£ÅÁ∫∏Êï∞ÊçÆÊó∂Âá∫Èîô:', e);
                    }
                }
            }

            // ‰øùÂ≠òÂ£ÅÁ∫∏
            function saveWallpaper(wallpaperData) {
                localStorage.setItem('wallpaper', JSON.stringify(wallpaperData));
                loadWallpaper();
            }

            // ‰øùÂ≠ò‰∏™‰∫∫ËµÑÊñôÊï∞ÊçÆ
            function saveProfileData(avatar, nickname, signature) {
                if (avatar) {
                    localStorage.setItem('profileAvatar', avatar);
                }
                if (nickname) {
                    localStorage.setItem('profileNickname', nickname);
                }
                if (signature) {
                    localStorage.setItem('profileSignature', signature);
                }
                loadProfileData();
            }

            // Êî∂ËóèÊ≠åÊõ≤
            function toggleFavorite(songName) {
                const isFavorite = localStorage.getItem(`favorite_${songName}`) === 'true';
                localStorage.setItem(`favorite_${songName}`, !isFavorite);
                initMusicPlayer();
            }

            // ËÆæÁΩÆ‰∫ã‰ª∂ÁõëÂê¨Âô®
            // Êõ¥Êç¢‰∏™ÊÄßÁ≠æÂêç
            function changeSignature() {
                const signature = prompt('ËØ∑ËæìÂÖ•ÊÇ®ÁöÑ‰∏™ÊÄßÁ≠æÂêçÔºö', document.getElementById('profileSignature').textContent);
                if (signature !== null) {
                    document.getElementById('profileSignature').textContent = signature;
                    localStorage.setItem('profileSignature', signature);
                }
            }

            // Êõ¥Êç¢ÁÖßÁâá
            function changePhoto(photoNumber) {
                // ÂàõÂª∫Êñá‰ª∂ËæìÂÖ•ÂÖÉÁ¥†
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.onchange = function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            // Êõ¥Êñ∞ÁÖßÁâáÊòæÁ§∫ÔºåÁ°Æ‰øùÊ≠£Á°ÆÊØî‰æã
                            const photoCard = document.querySelector(`.photo-card-${photoNumber}`);
                            photoCard.innerHTML = `<img src="${e.target.result}" alt="ÁÖßÁâá${photoNumber}" style="width:100%;height:100%;object-fit:cover;object-position:center;">`;
                            // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
                            localStorage.setItem(`photo${photoNumber}`, e.target.result);
                        };
                        reader.readAsDataURL(file);
                    }
                };
                input.click();
            }

            // Âä†ËΩΩ‰øùÂ≠òÁöÑÁÖßÁâá
            function loadSavedPhotos() {
                for (let i = 1; i <= 3; i++) {
                    const savedPhoto = localStorage.getItem(`photo${i}`);
                    if (savedPhoto) {
                        const photoCard = document.querySelector(`.photo-card-${i}`);
                        photoCard.innerHTML = `<img src="${savedPhoto}" alt="ÁÖßÁâá${i}" style="width:100%;height:100%;object-fit:cover;object-position:center;">`;
                    }
                }
            }

            // ÁÇπÂáªÊ≠åÊõ≤ÂêçÊâìÂºÄÂºπÁ™ó
            function openSongModal() {
                document.getElementById('songModal').classList.add('active');
                // Âä†ËΩΩÂ∑≤‰øùÂ≠òÁöÑÊ≠åÊõ≤‰ø°ÊÅØ
                const savedSong = localStorage.getItem('currentSong');
                if (savedSong) {
                    const song = JSON.parse(savedSong);
                    document.getElementById('songNameInput').value = song.name;
                    document.getElementById('artistNameInput').value = song.artist;
                    document.getElementById('saveSongBtn').disabled = false;
                }
                
                // Ê£ÄÊü•ÊòØÂê¶Êúâ‰øùÂ≠òÁöÑÊ≠åÊõ≤Êñá‰ª∂
                const savedSongFile = localStorage.getItem('currentSongFile');
                if (savedSongFile) {
                    const songFile = JSON.parse(savedSongFile);
                    // Â¶ÇÊûúÊúâ‰øùÂ≠òÁöÑÊñá‰ª∂ÔºåÂêØÁî®‰øùÂ≠òÊåâÈíÆ
                    document.getElementById('saveSongBtn').disabled = false;
                }
            }

            // ÂÖ≥Èó≠ÂºπÁ™ó
            function closeSongModal() {
                document.getElementById('songModal').classList.remove('active');
            }

            // Â§ÑÁêÜMP3‰∏ä‰º†
            function handleMp3Upload(event) {
                const file = event.target.files[0];
                if (file) {
                    // Ê£ÄÊü•Êñá‰ª∂Â§ßÂ∞èÔºàÈôêÂà∂‰∏∫10MBÔºâ
                    if (file.size > 10 * 1024 * 1024) {
                        alert('Êñá‰ª∂Â§™Â§ßÔºåËØ∑ÈÄâÊã©Â∞è‰∫é10MBÁöÑÊñá‰ª∂');
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        // ‰øùÂ≠òMP3Êñá‰ª∂Êï∞ÊçÆÂà∞Êú¨Âú∞Â≠òÂÇ®
                        localStorage.setItem('currentSongFile', JSON.stringify({
                            name: file.name,
                            size: file.size,
                            type: file.type,
                            data: e.target.result,
                            lastModified: file.lastModified
                        }));
                        
                        // ÂêØÁî®‰øùÂ≠òÊåâÈíÆ
                        document.getElementById('saveSongBtn').disabled = false;
                    };
                    reader.onerror = function(e) {
                        console.error('Êñá‰ª∂ËØªÂèñÈîôËØØ:', e);
                        alert('Êñá‰ª∂ËØªÂèñÂ§±Ë¥•ÔºåËØ∑ÈáçËØï');
                    };
                    reader.readAsDataURL(file);
                }
            }

            // ‰øùÂ≠òÊ≠åÊõ≤‰ø°ÊÅØ
            function saveSongInfo() {
                const songName = document.getElementById('songNameInput').value || 'Êú™Áü•Ê≠åÊõ≤';
                const artistName = document.getElementById('artistNameInput').value || 'Êú™Áü•Ëâ∫ÊúØÂÆ∂';
                
                // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
                const songData = {
                    name: songName,
                    artist: artistName
                };
                localStorage.setItem('currentSong', JSON.stringify(songData));
                
                // Êõ¥Êñ∞È°µÈù¢ÊòæÁ§∫
                document.getElementById('songName').textContent = songName;
                document.getElementById('artistName').textContent = artistName;
                
                // ÂÖ≥Èó≠ÂºπÁ™ó
                closeSongModal();
                
                // ÊòæÁ§∫‰øùÂ≠òÊàêÂäüÊèêÁ§∫
                // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†‰∏Ä‰∏™ÁÆÄÂçïÁöÑÊèêÁ§∫ÔºåÊØîÂ¶Ç‰∏¥Êó∂ÊîπÂèòÊåâÈíÆÊñáÂ≠ó
                const saveBtn = document.getElementById('saveSongBtn');
                const originalText = saveBtn.textContent;
                saveBtn.textContent = 'Â∑≤‰øùÂ≠ò';
                setTimeout(() => {
                    saveBtn.textContent = originalText;
                    saveBtn.disabled = false;
                }, 1000);
            }

            // Êõ¥Êç¢‰∏ìËæëÂ∞ÅÈù¢
            function changeAlbumCover() {
                // ÂàõÂª∫Êñá‰ª∂ËæìÂÖ•ÂÖÉÁ¥†
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.onchange = function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            // Êõ¥Êñ∞Â∞ÅÈù¢ÊòæÁ§∫ÔºåÁ°Æ‰øùÊ≠£Á°ÆÊØî‰æã
                            document.getElementById('albumCover').innerHTML = `<img src="${e.target.result}" alt="‰∏ìËæëÂ∞ÅÈù¢" style="width:100%;height:100%;object-fit:cover;object-position:center;">`;
                            // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
                            localStorage.setItem('albumCover', e.target.result);
                        };
                        reader.readAsDataURL(file);
                    }
                };
                input.click();
            }

            // ÂàáÊç¢Êí≠Êîæ/ÊöÇÂÅú
            function togglePlay() {
                const albumCover = document.getElementById('albumCover');
                const playIcon = document.getElementById('playIcon');
                const pauseIcon = document.getElementById('pauseIcon');
                const audioPlayer = document.getElementById('audioPlayer');
                
                if (albumCover.classList.contains('playing')) {
                    // ÊöÇÂÅú
                    albumCover.classList.remove('playing');
                    playIcon.style.display = 'block';
                    pauseIcon.style.display = 'none';
                    audioPlayer.pause();
                } else {
                    // Êí≠Êîæ
                    albumCover.classList.add('playing');
                    playIcon.style.display = 'none';
                    pauseIcon.style.display = 'block';
                    
                    // Ê£ÄÊü•ÊòØÂê¶Êúâ‰øùÂ≠òÁöÑÊ≠åÊõ≤Êñá‰ª∂
                    const savedSongFile = localStorage.getItem('currentSongFile');
                    if (savedSongFile) {
                        const songFile = JSON.parse(savedSongFile);
                        audioPlayer.src = songFile.data;
                        audioPlayer.play().catch(e => {
                            console.error('Êí≠ÊîæÂ§±Ë¥•:', e);
                            // Â¶ÇÊûúÊí≠ÊîæÂ§±Ë¥•ÔºåÂõûÊªöUIÁä∂ÊÄÅ
                            albumCover.classList.remove('playing');
                            playIcon.style.display = 'block';
                            pauseIcon.style.display = 'none';
                            alert('Êí≠ÊîæÂ§±Ë¥•ÔºåËØ∑ÈáçËØï');
                        });
                    } else {
                        // Ê≤°Êúâ‰∏ä‰º†Êñá‰ª∂Êó∂ÁöÑÊèêÁ§∫
                        albumCover.classList.remove('playing');
                        playIcon.style.display = 'block';
                        pauseIcon.style.display = 'none';
                        alert('ËØ∑ÂÖà‰∏ä‰º†MP3Êñá‰ª∂');
                    }
                }
            }

            // ‰∏ä‰∏ÄÈ¶ñ
            function previousSong() {
                // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†ÂàáÊç¢Ê≠åÊõ≤ÁöÑÈÄªËæë
            }

            // ÂàùÂßãÂåñÈü≥‰πêÊí≠ÊîæÂô®
            function initMusicPlayer() {
                // ‰ªéÊú¨Âú∞Â≠òÂÇ®Âä†ËΩΩÈü≥‰πêÊï∞ÊçÆ
                const savedSong = localStorage.getItem('currentSong');
                if (savedSong) {
                    try {
                        const song = JSON.parse(savedSong);
                        document.getElementById('songName').textContent = song.name;
                        document.getElementById('artistName').textContent = song.artist;
                        
                        // Ê£ÄÊü•ÊòØÂê¶Êî∂Ëóè
                        const isFavorite = localStorage.getItem(`favorite_${song.name}`) === 'true';
                        if (isFavorite) {
                            document.getElementById('favoriteBtn').classList.add('active');
                        }
                    } catch (e) {
                        console.error('Ëß£ÊûêÊ≠åÊõ≤Êï∞ÊçÆÊó∂Âá∫Èîô:', e);
                    }
                }
                
                // Âä†ËΩΩ‰∏ìËæëÂ∞ÅÈù¢
                const savedCover = localStorage.getItem('albumCover');
                if (savedCover) {
                    document.getElementById('albumCover').innerHTML = `<img src="${savedCover}" alt="‰∏ìËæëÂ∞ÅÈù¢" style="width:100%;height:100%;object-fit:cover;object-position:center;">`;
                }
                
                // Ê£ÄÊü•ÊòØÂê¶Êúâ‰øùÂ≠òÁöÑÊ≠åÊõ≤Êñá‰ª∂
                const savedSongFile = localStorage.getItem('currentSongFile');
                if (savedSongFile) {
                    try {
                        const songFile = JSON.parse(savedSongFile);
                        // ËøôÈáåÂèØ‰ª•Ê∑ªÂä†Êí≠ÊîæÊ≠åÊõ≤ÁöÑÈÄªËæë
                        
                        // ÂêØÁî®‰øùÂ≠òÊåâÈíÆ
                        const saveSongBtn = document.getElementById('saveSongBtn');
                        if (saveSongBtn) {
                            saveSongBtn.disabled = false;
                        }
                    } catch (e) {
                        console.error('Ëß£ÊûêÊ≠åÊõ≤Êñá‰ª∂Êï∞ÊçÆÊó∂Âá∫Èîô:', e);
                    }
                }
                
                // Ê∑ªÂä†Èü≥È¢ëÊí≠ÊîæÁªìÊùü‰∫ã‰ª∂ÁõëÂê¨Âô®ÂÆûÁé∞Âæ™ÁéØÊí≠Êîæ
                const audioPlayer = document.getElementById('audioPlayer');
                if (audioPlayer) {
                    audioPlayer.addEventListener('ended', function() {
                        // ÂΩìÈü≥È¢ëÊí≠ÊîæÁªìÊùüÊó∂ÔºåËá™Âä®ÈáçÊñ∞Êí≠Êîæ
                        const albumCover = document.getElementById('albumCover');
                        const playIcon = document.getElementById('playIcon');
                        const pauseIcon = document.getElementById('pauseIcon');
                        
                        // ‰øùÊåÅÊí≠ÊîæÁä∂ÊÄÅ‰ΩÜÈáçÁΩÆÈü≥È¢ë
                        if (albumCover) albumCover.classList.add('playing');
                        if (playIcon) playIcon.style.display = 'none';
                        if (pauseIcon) pauseIcon.style.display = 'block';
                        
                        // ÈáçÊñ∞ËÆæÁΩÆÈü≥È¢ëÊ∫êÂπ∂Êí≠Êîæ
                        const savedSongFile = localStorage.getItem('currentSongFile');
                        if (savedSongFile) {
                            try {
                                const songFile = JSON.parse(savedSongFile);
                                audioPlayer.src = songFile.data;
                                audioPlayer.currentTime = 0;
                                audioPlayer.play().catch(e => {
                                    console.error('Âæ™ÁéØÊí≠ÊîæÂ§±Ë¥•:', e);
                                });
                            } catch (e) {
                                console.error('Ëß£ÊûêÂæ™ÁéØÊí≠ÊîæÊï∞ÊçÆÊó∂Âá∫Èîô:', e);
                            }
                        }
                    });
                }
            }

            // ‰øùÂ≠òÈü≥‰πêÊï∞ÊçÆ
            function saveMusicData(song, cover, songFile) {
                if (song) {
                    localStorage.setItem('currentSong', JSON.stringify(song));
                }
                if (cover) {
                    localStorage.setItem('albumCover', cover);
                }
                if (songFile) {
                    localStorage.setItem('currentSongFile', JSON.stringify(songFile));
                }
                initMusicPlayer();
            }

            // Êõ¥Êç¢‰∏ìËæëÂ∞ÅÈù¢
            function changeAlbumCover() {
                // ÂàõÂª∫Êñá‰ª∂ËæìÂÖ•ÂÖÉÁ¥†
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.onchange = function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            // Êõ¥Êñ∞Â∞ÅÈù¢ÊòæÁ§∫ÔºåÁ°Æ‰øùÊ≠£Á°ÆÊØî‰æã
                            document.getElementById('albumCover').innerHTML = `<img src="${e.target.result}" alt="‰∏ìËæëÂ∞ÅÈù¢" style="width:100%;height:100%;object-fit:cover;object-position:center;">`;
                            // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
                            localStorage.setItem('albumCover', e.target.result);
                        };
                        reader.readAsDataURL(file);
                    }
                };
                input.click();
            }

            // Êõ¥Êç¢Â§¥ÂÉè
            function changeAvatar() {
                // ÂàõÂª∫Êñá‰ª∂ËæìÂÖ•ÂÖÉÁ¥†
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.onchange = function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            // Êõ¥Êñ∞Â§¥ÂÉèÊòæÁ§∫ÔºåÁ°Æ‰øùÊ≠£Á°ÆÊØî‰æã
                            document.getElementById('profileAvatar').innerHTML = `<img src="${e.target.result}" alt="Â§¥ÂÉè" style="width:100%;height:100%;object-fit:cover;object-position:center;">`;
                            // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
                            localStorage.setItem('profileAvatar', e.target.result);
                        };
                        reader.readAsDataURL(file);
                    }
                };
                input.click();
            }

            // Êõ¥Êç¢ÊòµÁß∞
            function changeNickname() {
                // ÂàõÂª∫Ëá™ÂÆö‰πâÂºπÁ™ó
                showCustomPrompt('ËØ∑ËæìÂÖ•ÊÇ®ÁöÑÊòµÁß∞Ôºö', document.getElementById('profileNickname').textContent)
                    .then(nickname => {
                        if (nickname !== null) {
                            document.getElementById('profileNickname').textContent = nickname;
                            localStorage.setItem('profileNickname', nickname);
                        }
                    });
            }

            // Êõ¥Êç¢‰∏™ÊÄßÁ≠æÂêç
            function changeSignature() {
                // ÂàõÂª∫Ëá™ÂÆö‰πâÂºπÁ™ó
                showCustomPrompt('ËØ∑ËæìÂÖ•ÊÇ®ÁöÑ‰∏™ÊÄßÁ≠æÂêçÔºö', document.getElementById('profileSignature').textContent)
                    .then(signature => {
                        if (signature !== null) {
                            document.getElementById('profileSignature').textContent = signature;
                            localStorage.setItem('profileSignature', signature);
                        }
                    });
            }

            // ÊòæÁ§∫Ëá™ÂÆö‰πâÊèêÁ§∫ÂºπÁ™óÔºàÊõø‰ª£ÊµèËßàÂô®promptÔºâ
            function showCustomPrompt(message, defaultValue) {
                return new Promise((resolve) => {
                    // ÂàõÂª∫ÂºπÁ™óÂÖÉÁ¥†
                    const modal = document.createElement('div');
                    modal.className = 'modal custom-prompt-modal active';
                    modal.style.zIndex = '2000';
                    
                    modal.innerHTML = `
                        <div class="modal-content" style="max-width: 300px;">
                            <div class="modal-header">
                                <div class="modal-title">ÊèêÁ§∫</div>
                                <button class="close-btn" onclick="this.closest('.modal').remove()">&times;</button>
                            </div>
                            <div class="form-group">
                                <label class="form-label">${message}</label>
                                <input type="text" class="form-input" id="customPromptInput" value="${defaultValue || ''}">
                            </div>
                            <div style="display: flex; gap: 10px;">
                                <button class="submit-btn" style="flex: 1;" id="confirmBtn">Á°ÆÂÆö</button>
                                <button class="submit-btn" style="flex: 1; background: #666;" id="cancelBtn">ÂèñÊ∂à</button>
                            </div>
                        </div>
                    `;
                    
                    // Ê∑ªÂä†Âà∞È°µÈù¢
                    document.body.appendChild(modal);
                    
                    // ËÆæÁΩÆÊåâÈíÆ‰∫ã‰ª∂Â§ÑÁêÜÁ®ãÂ∫è
                    document.getElementById('confirmBtn').onclick = function() {
                        const value = document.getElementById('customPromptInput').value;
                        document.querySelector('.custom-prompt-modal').remove();
                        resolve(value);
                    };
                    
                    document.getElementById('cancelBtn').onclick = function() {
                        document.querySelector('.custom-prompt-modal').remove();
                        resolve(null);
                    };
                    
                    // ËÅöÁÑ¶Âà∞ËæìÂÖ•Ê°Ü
                    setTimeout(() => {
                        document.getElementById('customPromptInput').focus();
                    }, 100);
                });
            }

            // ÊòæÁ§∫È°µÈù¢ÂÜÖÊèêÁ§∫‰ø°ÊÅØÔºàÊõø‰ª£ÊµèËßàÂô®alertÔºâ
            function showPageAlert(message) {
                // ÂàõÂª∫ÊèêÁ§∫ÂÖÉÁ¥†
                const alertElement = document.createElement('div');
                alertElement.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(0, 0, 0, 0.8);
                    color: white;
                    padding: 20px;
                    border-radius: 10px;
                    z-index: 2000;
                    text-align: center;
                    backdrop-filter: blur(10px);
                    border: 1px solid rgba(255, 255, 255, 0.1);
                    max-width: 80%;
                `;
                alertElement.textContent = message;
                
                // Ê∑ªÂä†Âà∞È°µÈù¢
                document.body.appendChild(alertElement);
                
                // 3ÁßíÂêéËá™Âä®ÁßªÈô§
                setTimeout(() => {
                    if (alertElement.parentNode) {
                        alertElement.parentNode.removeChild(alertElement);
                    }
                }, 3000);
            }

            // Êõ¥Êç¢ÁÖßÁâáÂ±ïÁ§∫
            function changePhotoDisplay() {
                // ÂàõÂª∫Êñá‰ª∂ËæìÂÖ•ÂÖÉÁ¥†
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.onchange = function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            // Êõ¥Êñ∞ÁÖßÁâáÊòæÁ§∫
                            document.getElementById('photoDisplay').innerHTML = `<img src="${e.target.result}" alt="Â±ïÁ§∫ÁÖßÁâá" style="width:100%;height:100%;object-fit:cover;object-position:center;border-radius:10px;">`;
                            // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
                            localStorage.setItem('displayPhoto', e.target.result);
                        };
                        reader.readAsDataURL(file);
                    }
                };
                input.click();
            }

            // Âä†ËΩΩ‰øùÂ≠òÁöÑÁÖßÁâá
            function loadDisplayPhoto() {
                const savedPhoto = localStorage.getItem('displayPhoto');
                if (savedPhoto) {
                    document.getElementById('photoDisplay').innerHTML = `<img src="${savedPhoto}" alt="Â±ïÁ§∫ÁÖßÁâá" style="width:100%;height:100%;object-fit:cover;object-position:center;border-radius:10px;">`;
                }
            }

            // ÊâìÂºÄÂ§©Ê∞îÈÄâÊã©ÂºπÁ™ó
            function openWeatherModal() {
                document.getElementById('weatherModal').classList.add('active');
            }

            // ÂÖ≥Èó≠Â§©Ê∞îÈÄâÊã©ÂºπÁ™ó
            function closeWeatherModal() {
                document.getElementById('weatherModal').classList.remove('active');
            }

            // ÈÄâÊã©ÂüéÂ∏Ç
            function selectCity(city) {
                document.getElementById('cityInput').value = city;
            }

            // Ê†πÊçÆÂüéÂ∏ÇÊõ¥Êñ∞Â§©Ê∞î
            function updateWeatherByCity() {
                const city = document.getElementById('cityInput').value.trim();
                if (city) {
                    // Êõ¥Êñ∞ÂüéÂ∏ÇÂêçÁß∞
                    document.getElementById('weatherLocation').textContent = city;
                    
                    // ‰øùÂ≠òÂüéÂ∏ÇÂà∞Êú¨Âú∞Â≠òÂÇ®
                    localStorage.setItem('weatherCity', city);
                    
                    // Ëé∑ÂèñÁúüÂÆûÂ§©Ê∞îÊï∞ÊçÆ
                    getRealWeatherData(city);
                    
                    // ÂÖ≥Èó≠ÂºπÁ™ó
                    closeWeatherModal();
                } else {
                    alert('ËØ∑ËæìÂÖ•ÂüéÂ∏ÇÂêçÁß∞');
                }
            }

            // Ëé∑ÂèñÁúüÂÆûÂ§©Ê∞îÊï∞ÊçÆ
            function getRealWeatherData(city) {
                // ‰ΩøÁî® OpenWeatherMap API ÁöÑÂÖçË¥πÁ´ØÁÇπ (ÈúÄË¶ÅÁΩëÁªúËÆøÈóÆ)
                // Ê≥®ÊÑèÔºöËøôÈúÄË¶ÅËÆæÂ§áËÉΩËÆøÈóÆ‰∫íËÅîÁΩë
                const url = `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(city)}&appid=4a48e1e1428fd83889074671fbf259d9&units=metric&lang=zh_cn`;
                
                fetch(url)
                    .then(response => {
                        if (!response.ok) {
                            // Â¶ÇÊûúAPIË∞ÉÁî®Â§±Ë¥•Ôºå‰ΩøÁî®Â§áÁî®ÊñπÊ°à
                            throw new Error('Â§©Ê∞îAPIË∞ÉÁî®Â§±Ë¥•');
                        }
                        return response.json();
                    })
                    .then(data => {
                        // Â§ÑÁêÜÂ§©Ê∞îÊï∞ÊçÆ
                        processWeatherData(data);
                    })
                    .catch(error => {
                        console.error('Ëé∑ÂèñÂ§©Ê∞îÊï∞ÊçÆÊó∂Âá∫Èîô:', error);
                        // Â¶ÇÊûúAPIË∞ÉÁî®Â§±Ë¥•Ôºå‰ΩøÁî®Ê®°ÊãüÊï∞ÊçÆ
                        simulateWeatherData(city);
                    });
            }

            // Â§ÑÁêÜÁúüÂÆûÁöÑÂ§©Ê∞îÊï∞ÊçÆ
            function processWeatherData(data) {
                try {
                    // ‰ªéOpenWeatherMap APIËß£ÊûêÊï∞ÊçÆ
                    const weatherMain = data.weather[0].main;
                    const weatherDesc = data.weather[0].description;
                    const temp = Math.round(data.main.temp);
                    
                    // Á°ÆÂÆöÂ§©Ê∞îÁ±ªÂûã
                    let weatherType = 'sunny';
                    if (weatherMain === 'Rain' || weatherDesc.includes('Èõ®')) {
                        weatherType = 'rainy';
                    } else if (weatherMain === 'Snow' || weatherDesc.includes('Èõ™')) {
                        weatherType = 'snowy';
                    } else if (weatherMain === 'Clouds' || weatherDesc.includes('‰∫ë') || weatherDesc.includes('Èò¥')) {
                        weatherType = 'cloudy';
                    } else if (weatherMain === 'Thunderstorm' || weatherDesc.includes('Èõ∑')) {
                        weatherType = 'rainy';
                    } else if (weatherMain === 'Drizzle' || weatherDesc.includes('ÊØõÊØõÈõ®')) {
                        weatherType = 'rainy';
                    } else if (weatherMain === 'Clear') {
                        weatherType = 'sunny';
                    }
                    
                    // ÊèêÂèñÂ§©Ê∞î‰ø°ÊÅØ
                    const weather = {
                        type: weatherType,
                        description: weatherDesc,
                        temp: temp,
                        timestamp: new Date().toISOString()
                    };
                    
                    // Êõ¥Êñ∞Â§©Ê∞îÊòæÁ§∫
                    updateWeatherDisplay(weather);
                    
                    // ‰øùÂ≠òÂ§©Ê∞îÊï∞ÊçÆÂà∞Êú¨Âú∞Â≠òÂÇ®
                    localStorage.setItem('weatherData', JSON.stringify(weather));
                } catch (e) {
                    console.error('Â§ÑÁêÜÂ§©Ê∞îÊï∞ÊçÆÊó∂Âá∫Èîô:', e);
                    // Â¶ÇÊûúËß£ÊûêÂ§±Ë¥•Ôºå‰ΩøÁî®Ê®°ÊãüÊï∞ÊçÆ
                    const city = document.getElementById('weatherLocation').textContent || 'Âåó‰∫¨';
                    simulateWeatherData(city);
                }
            }

            // Ê®°ÊãüÂ§©Ê∞îÊï∞ÊçÆËé∑ÂèñÔºà‰Ωú‰∏∫Â§áÈÄâÊñπÊ°àÔºâ
            function simulateWeatherData(city) {
                // Ê®°Êãü‰∏çÂêåÁöÑÂ§©Ê∞îÊÉÖÂÜµ
                const weatherConditions = [
                    { type: 'sunny', description: 'Êô¥Â§©', temp: Math.floor(Math.random() * 10) + 22 },
                    { type: 'cloudy', description: 'Â§ö‰∫ë', temp: Math.floor(Math.random() * 10) + 15 },
                    { type: 'rainy', description: 'Â∞èÈõ®', temp: Math.floor(Math.random() * 5) + 10 },
                    { type: 'snowy', description: 'Â∞èÈõ™', temp: Math.floor(Math.random() * 5) + -2 },
                    { type: 'partlyCloudy', description: 'Êô¥ËΩ¨Â§ö‰∫ë', temp: Math.floor(Math.random() * 10) + 18 },
                    { type: 'sleet', description: 'Èõ®Â§πÈõ™', temp: Math.floor(Math.random() * 3) + 1 }
                ];
                
                // ÈöèÊú∫ÈÄâÊã©‰∏Ä‰∏™Â§©Ê∞îÊù°‰ª∂
                const weather = weatherConditions[Math.floor(Math.random() * weatherConditions.length)];
                
                // Êõ¥Êñ∞Â§©Ê∞îÊòæÁ§∫
                updateWeatherDisplay(weather);
                
                // ‰øùÂ≠òÂ§©Ê∞îÊï∞ÊçÆÂà∞Êú¨Âú∞Â≠òÂÇ®
                localStorage.setItem('weatherData', JSON.stringify({
                    type: weather.type,
                    temp: weather.temp,
                    description: weather.description,
                    timestamp: new Date().toISOString()
                }));
            }

            // Êõ¥Êñ∞Â§©Ê∞îÊòæÁ§∫
            function updateWeatherDisplay(weather) {
                // ÈöêËóèÊâÄÊúâÂ§©Ê∞îÂõæÊ†á
                document.getElementById('sunnyIcon').style.display = 'none';
                document.getElementById('rainyIcon').style.display = 'none';
                document.getElementById('cloudyIcon').style.display = 'none';
                document.getElementById('snowyIcon').style.display = 'none';
                document.getElementById('partlyCloudyIcon').style.display = 'none';
                document.getElementById('sleetIcon').style.display = 'none';
                document.getElementById('defaultWeatherIcon').style.display = 'none';
                
                // Ê†πÊçÆÂ§©Ê∞îÁ±ªÂûãÊòæÁ§∫ÂØπÂ∫îÂõæÊ†á
                switch(weather.type) {
                    case 'sunny':
                        document.getElementById('sunnyIcon').style.display = 'block';
                        break;
                    case 'rainy':
                        document.getElementById('rainyIcon').style.display = 'block';
                        break;
                    case 'cloudy':
                        document.getElementById('cloudyIcon').style.display = 'block';
                        break;
                    case 'snowy':
                        document.getElementById('snowyIcon').style.display = 'block';
                        break;
                    case 'partlyCloudy':
                        document.getElementById('partlyCloudyIcon').style.display = 'block';
                        break;
                    case 'sleet':
                        document.getElementById('sleetIcon').style.display = 'block';
                        break;
                    default:
                        document.getElementById('defaultWeatherIcon').style.display = 'block';
                }
                
                // Êõ¥Êñ∞Ê∏©Â∫¶ÂíåÊèèËø∞
                document.getElementById('weatherTemp').textContent = `${weather.temp}¬∞C`;
                document.getElementById('weatherDescription').textContent = weather.description;
                
                // ‰øùÂ≠òÂ§©Ê∞îÊï∞ÊçÆÂà∞Êú¨Âú∞Â≠òÂÇ®
                localStorage.setItem('weatherData', JSON.stringify({
                    type: weather.type,
                    temp: weather.temp,
                    description: weather.description,
                    timestamp: new Date().toISOString()
                }));
            }

            // Âä†ËΩΩ‰øùÂ≠òÁöÑÂ§©Ê∞îÊï∞ÊçÆ
            function loadWeatherData() {
                const savedCity = localStorage.getItem('weatherCity');
                const savedWeatherData = localStorage.getItem('weatherData');
                
                if (savedCity) {
                    document.getElementById('weatherLocation').textContent = savedCity;
                }
                
                if (savedWeatherData) {
                    try {
                        const weatherData = JSON.parse(savedWeatherData);
                        // Ê£ÄÊü•Êï∞ÊçÆÊòØÂê¶ËøáÊúüÔºàË∂ÖËøá1Â∞èÊó∂Ôºâ
                        const now = new Date();
                        const savedTime = new Date(weatherData.timestamp);
                        const timeDiff = now - savedTime;
                        
                        if (timeDiff < 3600000) { // 1Â∞èÊó∂ÂÜÖ
                            updateWeatherDisplay(weatherData);
                        } else {
                            // Êï∞ÊçÆËøáÊúüÔºåÈáçÊñ∞Ëé∑Âèñ
                            if (savedCity) {
                                getRealWeatherData(savedCity);
                            } else {
                                simulateWeatherData('Âåó‰∫¨');
                            }
                        }
                    } catch (e) {
                        console.error('Ëß£ÊûêÂ§©Ê∞îÊï∞ÊçÆÊó∂Âá∫Èîô:', e);
                    }
                }
            }

            // Â§©Ê∞îÁä∂ÊÄÅÊéßÂà∂ÂáΩÊï∞Ôºà‰øùÊåÅÂêëÂêéÂÖºÂÆπÔºâ
            function setWeatherState(state) {
                // ÈöêËóèÊâÄÊúâÂ§©Ê∞îÂõæÊ†á
                document.getElementById('sunnyIcon').style.display = 'none';
                document.getElementById('rainyIcon').style.display = 'none';
                document.getElementById('cloudyIcon').style.display = 'none';
                document.getElementById('snowyIcon').style.display = 'none';
                document.getElementById('partlyCloudyIcon').style.display = 'none';
                document.getElementById('sleetIcon').style.display = 'none';
                document.getElementById('defaultWeatherIcon').style.display = 'none';
                
                // Ê†πÊçÆÁä∂ÊÄÅÊòæÁ§∫ÂØπÂ∫îÂõæÊ†á
                switch(state) {
                    case 'sunny':
                        document.getElementById('sunnyIcon').style.display = 'block';
                        break;
                    case 'rainy':
                        document.getElementById('rainyIcon').style.display = 'block';
                        break;
                    case 'cloudy':
                        document.getElementById('cloudyIcon').style.display = 'block';
                        break;
                    case 'snowy':
                        document.getElementById('snowyIcon').style.display = 'block';
                        break;
                    case 'partlyCloudy':
                        document.getElementById('partlyCloudyIcon').style.display = 'block';
                        break;
                    case 'sleet':
                        document.getElementById('sleetIcon').style.display = 'block';
                        break;
                    default:
                        document.getElementById('defaultWeatherIcon').style.display = 'block';
                }
                
                // ‰øùÂ≠òÂΩìÂâçÂ§©Ê∞îÁä∂ÊÄÅÂà∞Êú¨Âú∞Â≠òÂÇ®
                localStorage.setItem('weatherState', state);
            }

            // ÂàáÊç¢Â§©Ê∞îÁä∂ÊÄÅÔºà‰øùÊåÅÂêëÂêéÂÖºÂÆπÔºâ
            function toggleWeatherState() {
                // ‰∏çÂÜç‰ΩøÁî®ÊóßÁöÑÂàáÊç¢ÈÄªËæëÔºåËÄåÊòØÊâìÂºÄÂ§©Ê∞îÈÄâÊã©ÂºπÁ™ó
                openWeatherModal();
            }

            // Ê∑ªÂä†Êõ¥Êç¢Â§¥ÂÉèÁöÑÂáΩÊï∞
            function changeAvatar(side) {
                // ÂàõÂª∫Êñá‰ª∂ËæìÂÖ•ÂÖÉÁ¥†
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.onchange = function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            // ÂàõÂª∫Â§¥ÂÉèÂõæÁâáÂÖÉÁ¥†
                            const avatarImg = document.createElement('img');
                            avatarImg.src = e.target.result;
                            avatarImg.alt = 'Â§¥ÂÉè';
                            
                            // Êõ¥Êñ∞ÂØπÂ∫î‰æßÁöÑÂ§¥ÂÉèÊòæÁ§∫
                            if (side === 'left') {
                                const avatarContainer = document.getElementById('avatarLeft');
                                avatarContainer.innerHTML = '';
                                avatarContainer.appendChild(avatarImg);
                                // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
                                localStorage.setItem('romanticAvatarLeft', e.target.result);
                            } else if (side === 'right') {
                                const avatarContainer = document.getElementById('avatarRight');
                                avatarContainer.innerHTML = '';
                                avatarContainer.appendChild(avatarImg);
                                // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
                                localStorage.setItem('romanticAvatarRight', e.target.result);
                            }
                        };
                        reader.readAsDataURL(file);
                    }
                };
                input.click();
            }
            
            // Âä†ËΩΩ‰øùÂ≠òÁöÑÂ§¥ÂÉè
            function loadRomanticAvatars() {
                // Âä†ËΩΩÂ∑¶‰æßÂ§¥ÂÉè
                const savedAvatarLeft = localStorage.getItem('romanticAvatarLeft');
                if (savedAvatarLeft) {
                    const avatarImg = document.createElement('img');
                    avatarImg.src = savedAvatarLeft;
                    avatarImg.alt = 'Â§¥ÂÉè';
                    // Ê∑ªÂä†Ê†∑ÂºèÁ°Æ‰øùÂ§¥ÂÉèÊ≠£Á°ÆÊòæÁ§∫
                    avatarImg.style.width = '100%';
                    avatarImg.style.height = '100%';
                    avatarImg.style.objectFit = 'cover';
                    avatarImg.style.objectPosition = 'center';
                    avatarImg.style.borderRadius = '50%';
                    
                    const avatarContainer = document.getElementById('avatarLeft');
                    avatarContainer.innerHTML = '';
                    avatarContainer.appendChild(avatarImg);
                }
                
                // Âä†ËΩΩÂè≥‰æßÂ§¥ÂÉè
                const savedAvatarRight = localStorage.getItem('romanticAvatarRight');
                if (savedAvatarRight) {
                    const avatarImg = document.createElement('img');
                    avatarImg.src = savedAvatarRight;
                    avatarImg.alt = 'Â§¥ÂÉè';
                    // Ê∑ªÂä†Ê†∑ÂºèÁ°Æ‰øùÂ§¥ÂÉèÊ≠£Á°ÆÊòæÁ§∫
                    avatarImg.style.width = '100%';
                    avatarImg.style.height = '100%';
                    avatarImg.style.objectFit = 'cover';
                    avatarImg.style.objectPosition = 'center';
                    avatarImg.style.borderRadius = '50%';
                    
                    const avatarContainer = document.getElementById('avatarRight');
                    avatarContainer.innerHTML = '';
                    avatarContainer.appendChild(avatarImg);
                }
            }

            // Ê∑ªÂä†Êõ¥Êç¢ËØ≠Èü≥Â§¥ÂÉèÁöÑÂáΩÊï∞
            function changeVoiceAvatar() {
                // ÂàõÂª∫Êñá‰ª∂ËæìÂÖ•ÂÖÉÁ¥†
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'image/*';
                input.onchange = function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            // Êõ¥Êñ∞ËØ≠Èü≥Â§¥ÂÉèÊòæÁ§∫
                            const avatarImg = document.getElementById('voiceAvatarImg');
                            const avatarPlaceholder = document.getElementById('voiceAvatarPlaceholder');
                            avatarImg.src = e.target.result;
                            avatarImg.style.display = 'block';
                            avatarPlaceholder.style.display = 'none';
                            // ‰øùÂ≠òÂà∞Êú¨Âú∞Â≠òÂÇ®
                            localStorage.setItem('voiceAvatar', e.target.result);
                        };
                        reader.readAsDataURL(file);
                    }
                };
                input.click();
            }
            
            // Âä†ËΩΩ‰øùÂ≠òÁöÑËØ≠Èü≥Â§¥ÂÉè
            function loadVoiceAvatar() {
                const savedAvatar = localStorage.getItem('voiceAvatar');
                if (savedAvatar) {
                    const avatarImg = document.getElementById('voiceAvatarImg');
                    const avatarPlaceholder = document.getElementById('voiceAvatarPlaceholder');
                    avatarImg.src = savedAvatar;
                    avatarImg.style.display = 'block';
                    avatarPlaceholder.style.display = 'none';
                }
            }
            
            // ‰∏ä‰º†ËØ≠Èü≥Èü≥È¢ëÊñá‰ª∂
            function uploadVoiceAudio() {
                // ÂàõÂª∫Êñá‰ª∂ËæìÂÖ•ÂÖÉÁ¥†
                const input = document.createElement('input');
                input.type = 'file';
                input.accept = 'audio/*';
                input.onchange = function(event) {
                    const file = event.target.files[0];
                    if (file) {
                        const reader = new FileReader();
                        reader.onload = function(e) {
                            // ‰øùÂ≠òÈü≥È¢ëÊï∞ÊçÆÂà∞Êú¨Âú∞Â≠òÂÇ®
                            localStorage.setItem('voiceAudio', e.target.result);
                            localStorage.setItem('voiceAudioName', file.name);
                            // ÊòæÁ§∫ÊèêÁ§∫‰ø°ÊÅØ
                            alert('ËØ≠Èü≥Èü≥È¢ëÂ∑≤‰∏ä‰º†ÊàêÂäüÔºÅ');
                        };
                        reader.readAsDataURL(file);
                    }
                };
                input.click();
            }
            
            // Êí≠ÊîæËØ≠Èü≥Èü≥È¢ë
            let voiceAudio = null; // ÂÖ®Â±ÄÈü≥È¢ëÂØπË±°
            let isVoicePlaying = false; // Êí≠ÊîæÁä∂ÊÄÅÊ†áÂøó
            
            function playVoiceAudio() {
                const voiceAudioData = localStorage.getItem('voiceAudio');
                if (voiceAudioData) {
                    // Â¶ÇÊûúËøòÊ≤°ÊúâÂàõÂª∫Èü≥È¢ëÂØπË±°ÔºåÂàôÂàõÂª∫‰∏Ä‰∏™
                    if (!voiceAudio) {
                        voiceAudio = new Audio(voiceAudioData);
                        
                        // ÁõëÂê¨Êí≠ÊîæÁªìÊùü‰∫ã‰ª∂
                        voiceAudio.addEventListener('ended', function() {
                            isVoicePlaying = false;
                            // ÊÅ¢Â§çÊ≥¢Á∫πÂä®Áîª
                            const waveBars = document.querySelectorAll('.wave-bar');
                            waveBars.forEach(bar => {
                                bar.style.animation = 'waveAnimation 1s infinite ease-in-out';
                            });
                        });
                    }
                    
                    // ÂàáÊç¢Êí≠Êîæ/ÊöÇÂÅúÁä∂ÊÄÅ
                    if (isVoicePlaying) {
                        // ÂΩìÂâçÊ≠£Âú®Êí≠ÊîæÔºåÈúÄË¶ÅÊöÇÂÅú
                        voiceAudio.pause();
                        isVoicePlaying = false;
                        // ÊÅ¢Â§çÊ≥¢Á∫πÂä®Áîª
                        const waveBars = document.querySelectorAll('.wave-bar');
                        waveBars.forEach(bar => {
                            bar.style.animation = 'waveAnimation 1s infinite ease-in-out';
                        });
                    } else {
                        // ÂΩìÂâçÂ∑≤ÊöÇÂÅúÊàñÊú™Êí≠ÊîæÔºåÈúÄË¶ÅÊí≠Êîæ
                        voiceAudio.play().catch(e => {
                            console.error('Êí≠ÊîæÂ§±Ë¥•:', e);
                            alert('Èü≥È¢ëÊí≠ÊîæÂ§±Ë¥•ÔºåËØ∑ÈáçËØï');
                        });
                        isVoicePlaying = true;
                        // Âä†Âø´Ê≥¢Á∫πÂä®Áîª
                        const waveBars = document.querySelectorAll('.wave-bar');
                        waveBars.forEach(bar => {
                            bar.style.animation = 'waveAnimation 0.5s infinite ease-in-out';
                        });
                    }
                } else {
                    alert('ËØ∑ÂÖà‰∏ä‰º†Èü≥È¢ëÊñá‰ª∂');
                }
            }

            // ========= ÊªëÂä®È°µÈù¢ÂäüËÉΩÁõ∏ÂÖ≥ÂáΩÊï∞ =========
            let currentPage = 0;
            let startX = 0;
            let startY = 0;
            let isSwiping = false;
            const pages = document.querySelectorAll('.page'); // Ëé∑ÂèñÊâÄÊúâÈ°µÈù¢
            const page1 = document.getElementById('page1');
            const page2 = document.getElementById('page2');

            // Ëß¶Êë∏ÂºÄÂßã‰∫ã‰ª∂
            document.addEventListener('touchstart', function(e) {
                startX = e.touches[0].clientX;
                startY = e.touches[0].clientY;
                isSwiping = true;
            });

            // Ëß¶Êë∏ÁßªÂä®‰∫ã‰ª∂
            document.addEventListener('touchmove', function(e) {
                if (!isSwiping) return;
                
                const currentX = e.touches[0].clientX;
                const currentY = e.touches[0].clientY;
                const diffX = currentX - startX;
                const diffY = currentY - startY;
                
                // Âà§Êñ≠ÊòØÂê¶‰∏∫Ê∞¥Âπ≥ÊªëÂä®
                if (Math.abs(diffX) > Math.abs(diffY)) {
                    e.preventDefault();
                    
                    // Ê†πÊçÆÂΩìÂâçÈ°µÈù¢ÂíåÊªëÂä®ÊñπÂêëÊõ¥Êñ∞‰ΩçÁΩÆ
                    if (currentPage === 0 && diffX < 0) {
                        // Á¨¨‰∏ÄÈ°µÂêëÂ∑¶ÊªëÂä®
                        const movePercent = Math.max(0, Math.min(100, -diffX / window.innerWidth * 100));
                        page1.style.transform = `translateX(${-movePercent}%)`;
                        page2.style.transform = `translateX(${-movePercent + 100}%)`;
                    } else if (currentPage === 1 && diffX > 0) {
                        // Á¨¨‰∫åÈ°µÂêëÂè≥ÊªëÂä®
                        const movePercent = Math.max(0, Math.min(100, diffX / window.innerWidth * 100));
                        page1.style.transform = `translateX(${-100 + movePercent}%)`;
                        page2.style.transform = `translateX(${movePercent}%)`;
                    }
                }
            });

            // Ëß¶Êë∏ÁªìÊùü‰∫ã‰ª∂
            document.addEventListener('touchend', function(e) {
                if (!isSwiping) return;
                
                const endX = e.changedTouches[0].clientX;
                const diffX = endX - startX;
                const absDiffX = Math.abs(diffX);
                
                // Âà§Êñ≠ÊòØÂê¶‰∏∫ÊúâÊïàÁöÑÊªëÂä®
                if (absDiffX > 30) { // ÊªëÂä®Ë∑ùÁ¶ªË∂ÖËøá30pxÊâçÂàáÊç¢È°µÈù¢
                    if (diffX < 0 && currentPage === 0) {
                        // ÂêëÂ∑¶ÊªëÂä®Âà∞Á¨¨‰∫åÈ°µ
                        currentPage = 1;
                        page1.style.transform = 'translateX(-100%)';
                        page2.style.transform = 'translateX(0)';
                    } else if (diffX > 0 && currentPage === 1) {
                        // ÂêëÂè≥ÊªëÂä®Âà∞Á¨¨‰∏ÄÈ°µ
                        currentPage = 0;
                        page1.style.transform = 'translateX(0)';
                        page2.style.transform = 'translateX(100%)';
                    }
                } else {
                    // ÊªëÂä®Ë∑ùÁ¶ª‰∏çÂ§üÔºåÂõûÂà∞Âéü‰ΩçÁΩÆ
                    if (currentPage === 0) {
                        page1.style.transform = 'translateX(0)';
                        page2.style.transform = 'translateX(100%)';
                    } else {
                        page1.style.transform = 'translateX(-100%)';
                        page2.style.transform = 'translateX(0)';
                    }
                }
                
                isSwiping = false;
            });
        </script>
    </div>
</body>
</html>
